!function(e){e.flexslider=function(t,a){var n=e(t);n.vars=e.extend({},e.flexslider.defaults,a);var i,s=n.vars.namespace,r=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,o=("ontouchstart"in window||r||window.DocumentTouch&&document instanceof DocumentTouch)&&n.vars.touch,l="click touchend MSPointerUp keyup",c="",d="vertical"===n.vars.direction,u=n.vars.reverse,v=n.vars.itemWidth>0,p="fade"===n.vars.animation,m=""!==n.vars.asNavFor,f={},g=!0;e.data(t,"flexslider",n),f={init:function(){n.animating=!1,n.currentSlide=parseInt(n.vars.startAt?n.vars.startAt:0,10),isNaN(n.currentSlide)&&(n.currentSlide=0),n.animatingTo=n.currentSlide,n.atEnd=0===n.currentSlide||n.currentSlide===n.last,n.containerSelector=n.vars.selector.substr(0,n.vars.selector.search(" ")),n.slides=e(n.vars.selector,n),n.container=e(n.containerSelector,n),n.count=n.slides.length,n.syncExists=e(n.vars.sync).length>0,"slide"===n.vars.animation&&(n.vars.animation="swing"),n.prop=d?"top":"marginLeft",n.args={},n.manualPause=!1,n.stopped=!1,n.started=!1,n.startTimeout=null,n.transitions=!n.vars.video&&!p&&n.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var a in t)if(void 0!==e.style[t[a]])return n.pfx=t[a].replace("Perspective","").toLowerCase(),n.prop="-"+n.pfx+"-transform",!0;return!1}(),n.ensureAnimationEnd="",""!==n.vars.controlsContainer&&(n.controlsContainer=e(n.vars.controlsContainer).length>0&&e(n.vars.controlsContainer)),""!==n.vars.manualControls&&(n.manualControls=e(n.vars.manualControls).length>0&&e(n.vars.manualControls)),n.vars.randomize&&(n.slides.sort(function(){return Math.round(Math.random())-.5}),n.container.empty().append(n.slides)),n.doMath(),n.setup("init"),n.vars.controlNav&&f.controlNav.setup(),n.vars.directionNav&&f.directionNav.setup(),n.vars.keyboard&&(1===e(n.containerSelector).length||n.vars.multipleKeyboard)&&e(document).bind("keyup",function(e){var t=e.keyCode;if(!n.animating&&(39===t||37===t)){var a=39===t?n.getTarget("next"):37===t?n.getTarget("prev"):!1;n.flexAnimate(a,n.vars.pauseOnAction)}}),n.vars.mousewheel&&n.bind("mousewheel",function(e,t,a,i){e.preventDefault();var s=n.getTarget(0>t?"next":"prev");n.flexAnimate(s,n.vars.pauseOnAction)}),n.vars.pausePlay&&f.pausePlay.setup(),n.vars.slideshow&&n.vars.pauseInvisible&&f.pauseInvisible.init(),n.vars.slideshow&&(n.vars.pauseOnHover&&n.hover(function(){n.manualPlay||n.manualPause||n.pause()},function(){n.manualPause||n.manualPlay||n.stopped||n.play()}),n.vars.pauseInvisible&&f.pauseInvisible.isHidden()||(n.vars.initDelay>0?n.startTimeout=setTimeout(n.play,n.vars.initDelay):n.play())),m&&f.asNav.setup(),o&&n.vars.touch&&f.touch(),(!p||p&&n.vars.smoothHeight)&&e(window).bind("resize orientationchange focus",f.resize),n.find("img").attr("draggable","false"),setTimeout(function(){n.vars.start(n)},200)},asNav:{setup:function(){n.asNav=!0,n.animatingTo=Math.floor(n.currentSlide/n.move),n.currentItem=n.currentSlide,n.slides.removeClass(s+"active-slide").eq(n.currentItem).addClass(s+"active-slide"),r?(t._slider=n,n.slides.each(function(){var t=this;t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),t.addEventListener("MSGestureTap",function(t){t.preventDefault();var a=e(this),i=a.index();e(n.vars.asNavFor).data("flexslider").animating||a.hasClass("active")||(n.direction=n.currentItem<i?"next":"prev",n.flexAnimate(i,n.vars.pauseOnAction,!1,!0,!0))})})):n.slides.on(l,function(t){t.preventDefault();var a=e(this),i=a.index(),r=a.offset().left-e(n).scrollLeft();0>=r&&a.hasClass(s+"active-slide")?n.flexAnimate(n.getTarget("prev"),!0):e(n.vars.asNavFor).data("flexslider").animating||a.hasClass(s+"active-slide")||(n.direction=n.currentItem<i?"next":"prev",n.flexAnimate(i,n.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){n.manualControls?f.controlNav.setupManual():f.controlNav.setupPaging()},setupPaging:function(){var t,a,i="thumbnails"===n.vars.controlNav?"control-thumbs":"control-paging",r=1;if(n.controlNavScaffold=e('<ol class="'+s+"control-nav "+s+i+'"></ol>'),n.pagingCount>1)for(var o=0;o<n.pagingCount;o++){if(a=n.slides.eq(o),t="thumbnails"===n.vars.controlNav?'<img src="'+a.attr("data-thumb")+'"/>':"<a>"+r+"</a>","thumbnails"===n.vars.controlNav&&!0===n.vars.thumbCaptions){var d=a.attr("data-thumbcaption");""!=d&&void 0!=d&&(t+='<span class="'+s+'caption">'+d+"</span>")}n.controlNavScaffold.append("<li>"+t+"</li>"),r++}n.controlsContainer?e(n.controlsContainer).append(n.controlNavScaffold):n.append(n.controlNavScaffold),f.controlNav.set(),f.controlNav.active(),n.controlNavScaffold.delegate("a, img",l,function(t){if(t.preventDefault(),""===c||c===t.type){var a=e(this),i=n.controlNav.index(a);a.hasClass(s+"active")||(n.direction=i>n.currentSlide?"next":"prev",n.flexAnimate(i,n.vars.pauseOnAction))}""===c&&(c=t.type),f.setToClearWatchedEvent()})},setupManual:function(){n.controlNav=n.manualControls,f.controlNav.active(),n.controlNav.bind(l,function(t){if(t.preventDefault(),""===c||c===t.type){var a=e(this),i=n.controlNav.index(a);a.hasClass(s+"active")||(n.direction=i>n.currentSlide?"next":"prev",n.flexAnimate(i,n.vars.pauseOnAction))}""===c&&(c=t.type),f.setToClearWatchedEvent()})},set:function(){var t="thumbnails"===n.vars.controlNav?"img":"a";n.controlNav=e("."+s+"control-nav li "+t,n.controlsContainer?n.controlsContainer:n)},active:function(){n.controlNav.removeClass(s+"active").eq(n.animatingTo).addClass(s+"active")},update:function(t,a){n.pagingCount>1&&"add"===t?n.controlNavScaffold.append(e("<li><a>"+n.count+"</a></li>")):1===n.pagingCount?n.controlNavScaffold.find("li").remove():n.controlNav.eq(a).closest("li").remove(),f.controlNav.set(),n.pagingCount>1&&n.pagingCount!==n.controlNav.length?n.update(a,t):f.controlNav.active()}},directionNav:{setup:function(){var t=e('<ul class="'+s+'direction-nav"><li class="'+s+'nav-prev"><a class="'+s+'prev" href="#">'+n.vars.prevText+'</a></li><li class="'+s+'nav-next"><a class="'+s+'next" href="#">'+n.vars.nextText+"</a></li></ul>");n.controlsContainer?(e(n.controlsContainer).append(t),n.directionNav=e("."+s+"direction-nav li a",n.controlsContainer)):(n.append(t),n.directionNav=e("."+s+"direction-nav li a",n)),f.directionNav.update(),n.directionNav.bind(l,function(t){t.preventDefault();var a;(""===c||c===t.type)&&(a=n.getTarget(e(this).hasClass(s+"next")?"next":"prev"),n.flexAnimate(a,n.vars.pauseOnAction)),""===c&&(c=t.type),f.setToClearWatchedEvent()})},update:function(){var e=s+"disabled";1===n.pagingCount?n.directionNav.addClass(e).attr("tabindex","-1"):n.vars.animationLoop?n.directionNav.removeClass(e).removeAttr("tabindex"):0===n.animatingTo?n.directionNav.removeClass(e).filter("."+s+"prev").addClass(e).attr("tabindex","-1"):n.animatingTo===n.last?n.directionNav.removeClass(e).filter("."+s+"next").addClass(e).attr("tabindex","-1"):n.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var t=e('<div class="'+s+'pauseplay"><a></a></div>');n.controlsContainer?(n.controlsContainer.append(t),n.pausePlay=e("."+s+"pauseplay a",n.controlsContainer)):(n.append(t),n.pausePlay=e("."+s+"pauseplay a",n)),f.pausePlay.update(n.vars.slideshow?s+"pause":s+"play"),n.pausePlay.bind(l,function(t){t.preventDefault(),(""===c||c===t.type)&&(e(this).hasClass(s+"pause")?(n.manualPause=!0,n.manualPlay=!1,n.pause()):(n.manualPause=!1,n.manualPlay=!0,n.play())),""===c&&(c=t.type),f.setToClearWatchedEvent()})},update:function(e){"play"===e?n.pausePlay.removeClass(s+"pause").addClass(s+"play").html(n.vars.playText):n.pausePlay.removeClass(s+"play").addClass(s+"pause").html(n.vars.pauseText)}},touch:function(){function e(e){n.animating?e.preventDefault():(window.navigator.msPointerEnabled||1===e.touches.length)&&(n.pause(),g=d?n.h:n.w,S=Number(new Date),x=e.touches[0].pageX,b=e.touches[0].pageY,f=v&&u&&n.animatingTo===n.last?0:v&&u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:v&&n.currentSlide===n.last?n.limit:v?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:u?(n.last-n.currentSlide+n.cloneOffset)*g:(n.currentSlide+n.cloneOffset)*g,c=d?b:x,m=d?x:b,t.addEventListener("touchmove",a,!1),t.addEventListener("touchend",i,!1))}function a(e){x=e.touches[0].pageX,b=e.touches[0].pageY,h=d?c-b:c-x,y=d?Math.abs(h)<Math.abs(x-m):Math.abs(h)<Math.abs(b-m);var t=500;(!y||Number(new Date)-S>t)&&(e.preventDefault(),!p&&n.transitions&&(n.vars.animationLoop||(h/=0===n.currentSlide&&0>h||n.currentSlide===n.last&&h>0?Math.abs(h)/g+2:1),n.setProps(f+h,"setTouch")))}function i(e){if(t.removeEventListener("touchmove",a,!1),n.animatingTo===n.currentSlide&&!y&&null!==h){var s=u?-h:h,r=n.getTarget(s>0?"next":"prev");n.canAdvance(r)&&(Number(new Date)-S<550&&Math.abs(s)>50||Math.abs(s)>g/2)?n.flexAnimate(r,n.vars.pauseOnAction):p||n.flexAnimate(n.currentSlide,n.vars.pauseOnAction,!0)}t.removeEventListener("touchend",i,!1),c=null,m=null,h=null,f=null}function s(e){e.stopPropagation(),n.animating?e.preventDefault():(n.pause(),t._gesture.addPointer(e.pointerId),w=0,g=d?n.h:n.w,S=Number(new Date),f=v&&u&&n.animatingTo===n.last?0:v&&u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:v&&n.currentSlide===n.last?n.limit:v?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:u?(n.last-n.currentSlide+n.cloneOffset)*g:(n.currentSlide+n.cloneOffset)*g)}function o(e){e.stopPropagation();var a=e.target._slider;if(a){var n=-e.translationX,i=-e.translationY;return w+=d?i:n,h=w,y=d?Math.abs(w)<Math.abs(-n):Math.abs(w)<Math.abs(-i),e.detail===e.MSGESTURE_FLAG_INERTIA?void setImmediate(function(){t._gesture.stop()}):void((!y||Number(new Date)-S>500)&&(e.preventDefault(),!p&&a.transitions&&(a.vars.animationLoop||(h=w/(0===a.currentSlide&&0>w||a.currentSlide===a.last&&w>0?Math.abs(w)/g+2:1)),a.setProps(f+h,"setTouch"))))}}function l(e){e.stopPropagation();var t=e.target._slider;if(t){if(t.animatingTo===t.currentSlide&&!y&&null!==h){var a=u?-h:h,n=t.getTarget(a>0?"next":"prev");t.canAdvance(n)&&(Number(new Date)-S<550&&Math.abs(a)>50||Math.abs(a)>g/2)?t.flexAnimate(n,t.vars.pauseOnAction):p||t.flexAnimate(t.currentSlide,t.vars.pauseOnAction,!0)}c=null,m=null,h=null,f=null,w=0}}var c,m,f,g,h,S,y=!1,x=0,b=0,w=0;r?(t.style.msTouchAction="none",t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",s,!1),t._slider=n,t.addEventListener("MSGestureChange",o,!1),t.addEventListener("MSGestureEnd",l,!1)):t.addEventListener("touchstart",e,!1)},resize:function(){!n.animating&&n.is(":visible")&&(v||n.doMath(),p?f.smoothHeight():v?(n.slides.width(n.computedW),n.update(n.pagingCount),n.setProps()):d?(n.viewport.height(n.h),n.setProps(n.h,"setTotal")):(n.vars.smoothHeight&&f.smoothHeight(),n.newSlides.width(n.computedW),n.setProps(n.computedW,"setTotal")))},smoothHeight:function(e){if(!d||p){var t=p?n:n.viewport;e?t.animate({height:n.slides.eq(n.animatingTo).height()},e):t.height(n.slides.eq(n.animatingTo).height())}},sync:function(t){var a=e(n.vars.sync).data("flexslider"),i=n.animatingTo;switch(t){case"animate":a.flexAnimate(i,n.vars.pauseOnAction,!1,!0);break;case"play":a.playing||a.asNav||a.play();break;case"pause":a.pause()}},uniqueID:function(t){return t.filter("[id]").add(t.find("[id]")).each(function(){var t=e(this);t.attr("id",t.attr("id")+"_clone")}),t},pauseInvisible:{visProp:null,init:function(){var e=f.pauseInvisible.getHiddenProp();if(e){var t=e.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(t,function(){f.pauseInvisible.isHidden()?n.startTimeout?clearTimeout(n.startTimeout):n.pause():n.started?n.play():n.vars.initDelay>0?setTimeout(n.play,n.vars.initDelay):n.play()})}},isHidden:function(){var e=f.pauseInvisible.getHiddenProp();return e?document[e]:!1},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(i),i=setTimeout(function(){c=""},3e3)}},n.flexAnimate=function(t,a,i,r,l){if(n.vars.animationLoop||t===n.currentSlide||(n.direction=t>n.currentSlide?"next":"prev"),m&&1===n.pagingCount&&(n.direction=n.currentItem<t?"next":"prev"),!n.animating&&(n.canAdvance(t,l)||i)&&n.is(":visible")){if(m&&r){var c=e(n.vars.asNavFor).data("flexslider");if(n.atEnd=0===t||t===n.count-1,c.flexAnimate(t,!0,!1,!0,l),n.direction=n.currentItem<t?"next":"prev",c.direction=n.direction,Math.ceil((t+1)/n.visible)-1===n.currentSlide||0===t)return n.currentItem=t,n.slides.removeClass(s+"active-slide").eq(t).addClass(s+"active-slide"),!1;n.currentItem=t,n.slides.removeClass(s+"active-slide").eq(t).addClass(s+"active-slide"),t=Math.floor(t/n.visible)}if(n.animating=!0,n.animatingTo=t,a&&n.pause(),n.vars.before(n),n.syncExists&&!l&&f.sync("animate"),n.vars.controlNav&&f.controlNav.active(),v||n.slides.removeClass(s+"active-slide").eq(t).addClass(s+"active-slide"),n.atEnd=0===t||t===n.last,n.vars.directionNav&&f.directionNav.update(),t===n.last&&(n.vars.end(n),n.vars.animationLoop||n.pause()),p)o?(n.slides.eq(n.currentSlide).css({opacity:0,zIndex:1}),n.slides.eq(t).css({opacity:1,zIndex:2}),n.wrapup(y)):(n.slides.eq(n.currentSlide).css({zIndex:1}).animate({opacity:0},n.vars.animationSpeed,n.vars.easing),n.slides.eq(t).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing,n.wrapup));else{var g,h,S,y=d?n.slides.filter(":first").height():n.computedW;v?(g=n.vars.itemMargin,S=(n.itemW+g)*n.move*n.animatingTo,h=S>n.limit&&1!==n.visible?n.limit:S):h=0===n.currentSlide&&t===n.count-1&&n.vars.animationLoop&&"next"!==n.direction?u?(n.count+n.cloneOffset)*y:0:n.currentSlide===n.last&&0===t&&n.vars.animationLoop&&"prev"!==n.direction?u?0:(n.count+1)*y:u?(n.count-1-t+n.cloneOffset)*y:(t+n.cloneOffset)*y,n.setProps(h,"",n.vars.animationSpeed),n.transitions?(n.vars.animationLoop&&n.atEnd||(n.animating=!1,n.currentSlide=n.animatingTo),n.container.unbind("webkitTransitionEnd transitionend"),n.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(n.ensureAnimationEnd),n.wrapup(y)}),clearTimeout(n.ensureAnimationEnd),n.ensureAnimationEnd=setTimeout(function(){n.wrapup(y)},n.vars.animationSpeed+100)):n.container.animate(n.args,n.vars.animationSpeed,n.vars.easing,function(){n.wrapup(y)})}n.vars.smoothHeight&&f.smoothHeight(n.vars.animationSpeed)}},n.wrapup=function(e){p||v||(0===n.currentSlide&&n.animatingTo===n.last&&n.vars.animationLoop?n.setProps(e,"jumpEnd"):n.currentSlide===n.last&&0===n.animatingTo&&n.vars.animationLoop&&n.setProps(e,"jumpStart")),n.animating=!1,n.currentSlide=n.animatingTo,n.vars.after(n)},n.animateSlides=function(){!n.animating&&g&&n.flexAnimate(n.getTarget("next"))},n.pause=function(){clearInterval(n.animatedSlides),n.animatedSlides=null,n.playing=!1,n.vars.pausePlay&&f.pausePlay.update("play"),n.syncExists&&f.sync("pause")},n.play=function(){n.playing&&clearInterval(n.animatedSlides),n.animatedSlides=n.animatedSlides||setInterval(n.animateSlides,n.vars.slideshowSpeed),n.started=n.playing=!0,n.vars.pausePlay&&f.pausePlay.update("pause"),n.syncExists&&f.sync("play")},n.stop=function(){n.pause(),n.stopped=!0},n.canAdvance=function(e,t){var a=m?n.pagingCount-1:n.last;return t?!0:m&&n.currentItem===n.count-1&&0===e&&"prev"===n.direction?!0:m&&0===n.currentItem&&e===n.pagingCount-1&&"next"!==n.direction?!1:e!==n.currentSlide||m?n.vars.animationLoop?!0:n.atEnd&&0===n.currentSlide&&e===a&&"next"!==n.direction?!1:n.atEnd&&n.currentSlide===a&&0===e&&"next"===n.direction?!1:!0:!1},n.getTarget=function(e){return n.direction=e,"next"===e?n.currentSlide===n.last?0:n.currentSlide+1:0===n.currentSlide?n.last:n.currentSlide-1},n.setProps=function(e,t,a){var i=function(){var a=e?e:(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo,i=function(){if(v)return"setTouch"===t?e:u&&n.animatingTo===n.last?0:u?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:n.animatingTo===n.last?n.limit:a;switch(t){case"setTotal":return u?(n.count-1-n.currentSlide+n.cloneOffset)*e:(n.currentSlide+n.cloneOffset)*e;case"setTouch":return u?e:e;case"jumpEnd":return u?e:n.count*e;case"jumpStart":return u?n.count*e:e;default:return e}}();return-1*i+"px"}();n.transitions&&(i=d?"translate3d(0,"+i+",0)":"translate3d("+i+",0,0)",a=void 0!==a?a/1e3+"s":"0s",n.container.css("-"+n.pfx+"-transition-duration",a),n.container.css("transition-duration",a)),n.args[n.prop]=i,(n.transitions||void 0===a)&&n.container.css(n.args),n.container.css("transform",i)},n.setup=function(t){if(p)n.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===t&&(o?n.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+n.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(n.currentSlide).css({opacity:1,zIndex:2}):0==n.vars.fadeFirstSlide?n.slides.css({opacity:0,display:"block",zIndex:1}).eq(n.currentSlide).css({zIndex:2}).css({opacity:1}):n.slides.css({opacity:0,display:"block",zIndex:1}).eq(n.currentSlide).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing)),n.vars.smoothHeight&&f.smoothHeight();else{var a,i;"init"===t&&(n.viewport=e('<div class="'+s+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(n).append(n.container),n.cloneCount=0,n.cloneOffset=0,u&&(i=e.makeArray(n.slides).reverse(),n.slides=e(i),n.container.empty().append(n.slides))),n.vars.animationLoop&&!v&&(n.cloneCount=2,n.cloneOffset=1,"init"!==t&&n.container.find(".clone").remove(),n.container.append(f.uniqueID(n.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(f.uniqueID(n.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),n.newSlides=e(n.vars.selector,n),a=u?n.count-1-n.currentSlide+n.cloneOffset:n.currentSlide+n.cloneOffset,d&&!v?(n.container.height(200*(n.count+n.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){n.newSlides.css({display:"block"}),n.doMath(),n.viewport.height(n.h),n.setProps(a*n.h,"init")},"init"===t?100:0)):(n.container.width(200*(n.count+n.cloneCount)+"%"),n.setProps(a*n.computedW,"init"),setTimeout(function(){n.doMath(),n.newSlides.css({width:n.computedW,"float":"left",display:"block"}),n.vars.smoothHeight&&f.smoothHeight()},"init"===t?100:0))}v||n.slides.removeClass(s+"active-slide").eq(n.currentSlide).addClass(s+"active-slide"),n.vars.init(n)},n.doMath=function(){var e=n.slides.first(),t=n.vars.itemMargin,a=n.vars.minItems,i=n.vars.maxItems;n.w=void 0===n.viewport?n.width():n.viewport.width(),n.h=e.height(),n.boxPadding=e.outerWidth()-e.width(),v?(n.itemT=n.vars.itemWidth+t,n.minW=a?a*n.itemT:n.w,n.maxW=i?i*n.itemT-t:n.w,n.itemW=n.minW>n.w?(n.w-t*(a-1))/a:n.maxW<n.w?(n.w-t*(i-1))/i:n.vars.itemWidth>n.w?n.w:n.vars.itemWidth,n.visible=Math.floor(n.w/n.itemW),n.move=n.vars.move>0&&n.vars.move<n.visible?n.vars.move:n.visible,n.pagingCount=Math.ceil((n.count-n.visible)/n.move+1),n.last=n.pagingCount-1,n.limit=1===n.pagingCount?0:n.vars.itemWidth>n.w?n.itemW*(n.count-1)+t*(n.count-1):(n.itemW+t)*n.count-n.w-t):(n.itemW=n.w,n.pagingCount=n.count,n.last=n.count-1),n.computedW=n.itemW-n.boxPadding},n.update=function(e,t){n.doMath(),v||(e<n.currentSlide?n.currentSlide+=1:e<=n.currentSlide&&0!==e&&(n.currentSlide-=1),n.animatingTo=n.currentSlide),n.vars.controlNav&&!n.manualControls&&("add"===t&&!v||n.pagingCount>n.controlNav.length?f.controlNav.update("add"):("remove"===t&&!v||n.pagingCount<n.controlNav.length)&&(v&&n.currentSlide>n.last&&(n.currentSlide-=1,n.animatingTo-=1),f.controlNav.update("remove",n.last))),n.vars.directionNav&&f.directionNav.update()},n.addSlide=function(t,a){var i=e(t);n.count+=1,n.last=n.count-1,d&&u?void 0!==a?n.slides.eq(n.count-a).after(i):n.container.prepend(i):void 0!==a?n.slides.eq(a).before(i):n.container.append(i),n.update(a,"add"),n.slides=e(n.vars.selector+":not(.clone)",n),n.setup(),n.vars.added(n)},n.removeSlide=function(t){var a=isNaN(t)?n.slides.index(e(t)):t;n.count-=1,n.last=n.count-1,isNaN(t)?e(t,n.slides).remove():d&&u?n.slides.eq(n.last).remove():n.slides.eq(t).remove(),n.doMath(),n.update(a,"remove"),n.slides=e(n.vars.selector+":not(.clone)",n),n.setup(),n.vars.removed(n)},f.init()},e(window).blur(function(e){focused=!1}).focus(function(e){focused=!0}),e.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},e.fn.flexslider=function(t){if(void 0===t&&(t={}),"object"==typeof t)return this.each(function(){var a=e(this),n=t.selector?t.selector:".slides > li",i=a.find(n);1===i.length&&t.allowOneSlide===!0||0===i.length?(i.fadeIn(400),t.start&&t.start(a)):void 0===a.data("flexslider")&&new e.flexslider(this,t)});var a=e(this).data("flexslider");switch(t){case"play":a.play();break;case"pause":a.pause();break;case"stop":a.stop();break;case"next":a.flexAnimate(a.getTarget("next"),!0);break;case"prev":case"previous":a.flexAnimate(a.getTarget("prev"),!0);break;default:"number"==typeof t&&a.flexAnimate(t,!0)}}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5mbGV4c2xpZGVyLmpzIl0sIm5hbWVzIjpbIiQiLCJmbGV4c2xpZGVyIiwiZWwiLCJvcHRpb25zIiwic2xpZGVyIiwidmFycyIsImV4dGVuZCIsImRlZmF1bHRzIiwid2F0Y2hlZEV2ZW50Q2xlYXJUaW1lciIsIm5hbWVzcGFjZSIsIm1zR2VzdHVyZSIsIndpbmRvdyIsIm5hdmlnYXRvciIsIm1zUG9pbnRlckVuYWJsZWQiLCJNU0dlc3R1cmUiLCJ0b3VjaCIsIkRvY3VtZW50VG91Y2giLCJkb2N1bWVudCIsImV2ZW50VHlwZSIsIndhdGNoZWRFdmVudCIsInZlcnRpY2FsIiwiZGlyZWN0aW9uIiwicmV2ZXJzZSIsImNhcm91c2VsIiwiaXRlbVdpZHRoIiwiZmFkZSIsImFuaW1hdGlvbiIsImFzTmF2IiwiYXNOYXZGb3IiLCJtZXRob2RzIiwiZm9jdXNlZCIsImRhdGEiLCJpbml0IiwiYW5pbWF0aW5nIiwiY3VycmVudFNsaWRlIiwicGFyc2VJbnQiLCJzdGFydEF0IiwiaXNOYU4iLCJhbmltYXRpbmdUbyIsImF0RW5kIiwibGFzdCIsImNvbnRhaW5lclNlbGVjdG9yIiwic2VsZWN0b3IiLCJzdWJzdHIiLCJzZWFyY2giLCJzbGlkZXMiLCJjb250YWluZXIiLCJjb3VudCIsImxlbmd0aCIsInN5bmNFeGlzdHMiLCJzeW5jIiwicHJvcCIsImFyZ3MiLCJtYW51YWxQYXVzZSIsInN0b3BwZWQiLCJzdGFydGVkIiwic3RhcnRUaW1lb3V0IiwidHJhbnNpdGlvbnMiLCJ2aWRlbyIsInVzZUNTUyIsIm9iaiIsImNyZWF0ZUVsZW1lbnQiLCJwcm9wcyIsImkiLCJ1bmRlZmluZWQiLCJzdHlsZSIsInBmeCIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsImVuc3VyZUFuaW1hdGlvbkVuZCIsImNvbnRyb2xzQ29udGFpbmVyIiwibWFudWFsQ29udHJvbHMiLCJyYW5kb21pemUiLCJzb3J0IiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiZW1wdHkiLCJhcHBlbmQiLCJkb01hdGgiLCJzZXR1cCIsImNvbnRyb2xOYXYiLCJkaXJlY3Rpb25OYXYiLCJrZXlib2FyZCIsIm11bHRpcGxlS2V5Ym9hcmQiLCJiaW5kIiwiZXZlbnQiLCJrZXljb2RlIiwia2V5Q29kZSIsInRhcmdldCIsImdldFRhcmdldCIsImZsZXhBbmltYXRlIiwicGF1c2VPbkFjdGlvbiIsIm1vdXNld2hlZWwiLCJkZWx0YSIsImRlbHRhWCIsImRlbHRhWSIsInByZXZlbnREZWZhdWx0IiwicGF1c2VQbGF5Iiwic2xpZGVzaG93IiwicGF1c2VJbnZpc2libGUiLCJwYXVzZU9uSG92ZXIiLCJob3ZlciIsIm1hbnVhbFBsYXkiLCJwYXVzZSIsInBsYXkiLCJpc0hpZGRlbiIsImluaXREZWxheSIsInNldFRpbWVvdXQiLCJzbW9vdGhIZWlnaHQiLCJyZXNpemUiLCJmaW5kIiwiYXR0ciIsInN0YXJ0IiwiZmxvb3IiLCJtb3ZlIiwiY3VycmVudEl0ZW0iLCJyZW1vdmVDbGFzcyIsImVxIiwiYWRkQ2xhc3MiLCJfc2xpZGVyIiwiZWFjaCIsInRoYXQiLCJ0aGlzIiwiX2dlc3R1cmUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImN1cnJlbnRUYXJnZXQiLCJhZGRQb2ludGVyIiwicG9pbnRlcklkIiwiJHNsaWRlIiwiaW5kZXgiLCJoYXNDbGFzcyIsIm9uIiwicG9zRnJvbUxlZnQiLCJvZmZzZXQiLCJsZWZ0Iiwic2Nyb2xsTGVmdCIsInNldHVwTWFudWFsIiwic2V0dXBQYWdpbmciLCJpdGVtIiwic2xpZGUiLCJ0eXBlIiwiaiIsImNvbnRyb2xOYXZTY2FmZm9sZCIsInBhZ2luZ0NvdW50IiwidGh1bWJDYXB0aW9ucyIsImNhcHRuIiwic2V0IiwiYWN0aXZlIiwiZGVsZWdhdGUiLCIkdGhpcyIsInNldFRvQ2xlYXJXYXRjaGVkRXZlbnQiLCJ1cGRhdGUiLCJhY3Rpb24iLCJwb3MiLCJyZW1vdmUiLCJjbG9zZXN0IiwiZGlyZWN0aW9uTmF2U2NhZmZvbGQiLCJwcmV2VGV4dCIsIm5leHRUZXh0IiwiZGlzYWJsZWRDbGFzcyIsImFuaW1hdGlvbkxvb3AiLCJyZW1vdmVBdHRyIiwiZmlsdGVyIiwicGF1c2VQbGF5U2NhZmZvbGQiLCJzdGF0ZSIsImh0bWwiLCJwbGF5VGV4dCIsInBhdXNlVGV4dCIsIm9uVG91Y2hTdGFydCIsInRvdWNoZXMiLCJjd2lkdGgiLCJoIiwidyIsInN0YXJ0VCIsIk51bWJlciIsIkRhdGUiLCJsb2NhbFgiLCJwYWdlWCIsImxvY2FsWSIsInBhZ2VZIiwibGltaXQiLCJpdGVtVyIsIml0ZW1NYXJnaW4iLCJjbG9uZU9mZnNldCIsInN0YXJ0WCIsInN0YXJ0WSIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaEVuZCIsImR4Iiwic2Nyb2xsaW5nIiwiYWJzIiwiZnhtcyIsInNldFByb3BzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInVwZGF0ZUR4IiwiY2FuQWR2YW5jZSIsIm9uTVNQb2ludGVyRG93biIsInN0b3BQcm9wYWdhdGlvbiIsImFjY0R4Iiwib25NU0dlc3R1cmVDaGFuZ2UiLCJ0cmFuc1giLCJ0cmFuc2xhdGlvblgiLCJ0cmFuc1kiLCJ0cmFuc2xhdGlvblkiLCJkZXRhaWwiLCJNU0dFU1RVUkVfRkxBR19JTkVSVElBIiwic2V0SW1tZWRpYXRlIiwic3RvcCIsIm9uTVNHZXN0dXJlRW5kIiwibXNUb3VjaEFjdGlvbiIsImlzIiwid2lkdGgiLCJjb21wdXRlZFciLCJ2aWV3cG9ydCIsImhlaWdodCIsIm5ld1NsaWRlcyIsImR1ciIsIiRvYmoiLCJhbmltYXRlIiwicGxheWluZyIsInVuaXF1ZUlEIiwiJGNsb25lIiwiYWRkIiwidmlzUHJvcCIsImdldEhpZGRlblByb3AiLCJldnRuYW1lIiwiY2xlYXJUaW1lb3V0IiwicHJlZml4ZXMiLCJvdmVycmlkZSIsIndpdGhTeW5jIiwiZnJvbU5hdiIsIm1hc3RlciIsImNlaWwiLCJ2aXNpYmxlIiwiYmVmb3JlIiwiZW5kIiwiY3NzIiwib3BhY2l0eSIsInpJbmRleCIsIndyYXB1cCIsImRpbWVuc2lvbiIsImFuaW1hdGlvblNwZWVkIiwiZWFzaW5nIiwibWFyZ2luIiwic2xpZGVTdHJpbmciLCJjYWxjTmV4dCIsInVuYmluZCIsImFmdGVyIiwiYW5pbWF0ZVNsaWRlcyIsImNsZWFySW50ZXJ2YWwiLCJhbmltYXRlZFNsaWRlcyIsInNldEludGVydmFsIiwic2xpZGVzaG93U3BlZWQiLCJkaXIiLCJzcGVjaWFsIiwicG9zQ2hlY2siLCJwb3NDYWxjIiwiZmxvYXQiLCJtYXJnaW5SaWdodCIsInBvc2l0aW9uIiwiZGlzcGxheSIsIndlYmtpdFRyYW5zaXRpb24iLCJmYWRlRmlyc3RTbGlkZSIsInNsaWRlck9mZnNldCIsImFyciIsIm92ZXJmbG93IiwiYXBwZW5kVG8iLCJjbG9uZUNvdW50IiwibWFrZUFycmF5IiwiZmlyc3QiLCJjbG9uZSIsInByZXBlbmQiLCJzbGlkZU1hcmdpbiIsIm1pbkl0ZW1zIiwibWF4SXRlbXMiLCJib3hQYWRkaW5nIiwib3V0ZXJXaWR0aCIsIml0ZW1UIiwibWluVyIsIm1heFciLCJhZGRTbGlkZSIsImFkZGVkIiwicmVtb3ZlU2xpZGUiLCJyZW1vdmVkIiwiYmx1ciIsImZvY3VzIiwiYWxsb3dPbmVTbGlkZSIsImZuIiwiJHNsaWRlcyIsImZhZGVJbiIsIiRzbGlkZXIiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQU9BLFNBQUFBLEdBR0FBLEVBQUFDLFdBQUEsU0FBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBSixFQUFBRSxFQUdBRSxHQUFBQyxLQUFBTCxFQUFBTSxVQUFBTixFQUFBQyxXQUFBTSxTQUFBSixFQUVBLElBT0FLLEdBUEFDLEVBQUFMLEVBQUFDLEtBQUFJLFVBQ0FDLEVBQUFDLE9BQUFDLFdBQUFELE9BQUFDLFVBQUFDLGtCQUFBRixPQUFBRyxVQUNBQyxHQUFBLGdCQUFBSixTQUFBRCxHQUFBQyxPQUFBSyxlQUFBQyxtQkFBQUQsaUJBQUFaLEVBQUFDLEtBQUFVLE1BR0FHLEVBQUEsbUNBQ0FDLEVBQUEsR0FFQUMsRUFBQSxhQUFBaEIsRUFBQUMsS0FBQWdCLFVBQ0FDLEVBQUFsQixFQUFBQyxL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aGlyZHBhcnR5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIGpRdWVyeSAqL1xyXG4vKlxyXG4gKiBqUXVlcnkgRmxleFNsaWRlciB2Mi40LjBcclxuICogQ29weXJpZ2h0IDIwMTIgV29vVGhlbWVzXHJcbiAqIENvbnRyaWJ1dGluZyBBdXRob3I6IFR5bGVyIFNtaXRoXHJcbiAqL1xyXG47XHJcbihmdW5jdGlvbiAoJCkge1xyXG5cclxuICAvL0ZsZXhTbGlkZXI6IE9iamVjdCBJbnN0YW5jZVxyXG4gICQuZmxleHNsaWRlciA9IGZ1bmN0aW9uKGVsLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgc2xpZGVyID0gJChlbCk7XHJcblxyXG4gICAgLy8gbWFraW5nIHZhcmlhYmxlcyBwdWJsaWNcclxuICAgIHNsaWRlci52YXJzID0gJC5leHRlbmQoe30sICQuZmxleHNsaWRlci5kZWZhdWx0cywgb3B0aW9ucyk7XHJcblxyXG4gICAgdmFyIG5hbWVzcGFjZSA9IHNsaWRlci52YXJzLm5hbWVzcGFjZSxcclxuICAgICAgICBtc0dlc3R1cmUgPSB3aW5kb3cubmF2aWdhdG9yICYmIHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCAmJiB3aW5kb3cuTVNHZXN0dXJlLFxyXG4gICAgICAgIHRvdWNoID0gKCggXCJvbnRvdWNoc3RhcnRcIiBpbiB3aW5kb3cgKSB8fCBtc0dlc3R1cmUgfHwgd2luZG93LkRvY3VtZW50VG91Y2ggJiYgZG9jdW1lbnQgaW5zdGFuY2VvZiBEb2N1bWVudFRvdWNoKSAmJiBzbGlkZXIudmFycy50b3VjaCxcclxuICAgICAgICAvLyBkZXByaWNhdGluZyB0aGlzIGlkZWEsIGFzIGRldmljZXMgYXJlIGJlaW5nIHJlbGVhc2VkIHdpdGggYm90aCBvZiB0aGVzZSBldmVudHNcclxuICAgICAgICAvL2V2ZW50VHlwZSA9ICh0b3VjaCkgPyBcInRvdWNoZW5kXCIgOiBcImNsaWNrXCIsXHJcbiAgICAgICAgZXZlbnRUeXBlID0gXCJjbGljayB0b3VjaGVuZCBNU1BvaW50ZXJVcCBrZXl1cFwiLFxyXG4gICAgICAgIHdhdGNoZWRFdmVudCA9IFwiXCIsXHJcbiAgICAgICAgd2F0Y2hlZEV2ZW50Q2xlYXJUaW1lcixcclxuICAgICAgICB2ZXJ0aWNhbCA9IHNsaWRlci52YXJzLmRpcmVjdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiLFxyXG4gICAgICAgIHJldmVyc2UgPSBzbGlkZXIudmFycy5yZXZlcnNlLFxyXG4gICAgICAgIGNhcm91c2VsID0gKHNsaWRlci52YXJzLml0ZW1XaWR0aCA+IDApLFxyXG4gICAgICAgIGZhZGUgPSBzbGlkZXIudmFycy5hbmltYXRpb24gPT09IFwiZmFkZVwiLFxyXG4gICAgICAgIGFzTmF2ID0gc2xpZGVyLnZhcnMuYXNOYXZGb3IgIT09IFwiXCIsXHJcbiAgICAgICAgbWV0aG9kcyA9IHt9LFxyXG4gICAgICAgIGZvY3VzZWQgPSB0cnVlO1xyXG5cclxuICAgIC8vIFN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBzbGlkZXIgb2JqZWN0XHJcbiAgICAkLmRhdGEoZWwsIFwiZmxleHNsaWRlclwiLCBzbGlkZXIpO1xyXG5cclxuICAgIC8vIFByaXZhdGUgc2xpZGVyIG1ldGhvZHNcclxuICAgIG1ldGhvZHMgPSB7XHJcbiAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNsaWRlci5hbmltYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAvLyBHZXQgY3VycmVudCBzbGlkZSBhbmQgbWFrZSBzdXJlIGl0IGlzIGEgbnVtYmVyXHJcbiAgICAgICAgc2xpZGVyLmN1cnJlbnRTbGlkZSA9IHBhcnNlSW50KCAoIHNsaWRlci52YXJzLnN0YXJ0QXQgPyBzbGlkZXIudmFycy5zdGFydEF0IDogMCksIDEwICk7XHJcbiAgICAgICAgaWYgKCBpc05hTiggc2xpZGVyLmN1cnJlbnRTbGlkZSApICkgeyBzbGlkZXIuY3VycmVudFNsaWRlID0gMDsgfVxyXG4gICAgICAgIHNsaWRlci5hbmltYXRpbmdUbyA9IHNsaWRlci5jdXJyZW50U2xpZGU7XHJcbiAgICAgICAgc2xpZGVyLmF0RW5kID0gKHNsaWRlci5jdXJyZW50U2xpZGUgPT09IDAgfHwgc2xpZGVyLmN1cnJlbnRTbGlkZSA9PT0gc2xpZGVyLmxhc3QpO1xyXG4gICAgICAgIHNsaWRlci5jb250YWluZXJTZWxlY3RvciA9IHNsaWRlci52YXJzLnNlbGVjdG9yLnN1YnN0cigwLHNsaWRlci52YXJzLnNlbGVjdG9yLnNlYXJjaCgnICcpKTtcclxuICAgICAgICBzbGlkZXIuc2xpZGVzID0gJChzbGlkZXIudmFycy5zZWxlY3Rvciwgc2xpZGVyKTtcclxuICAgICAgICBzbGlkZXIuY29udGFpbmVyID0gJChzbGlkZXIuY29udGFpbmVyU2VsZWN0b3IsIHNsaWRlcik7XHJcbiAgICAgICAgc2xpZGVyLmNvdW50ID0gc2xpZGVyLnNsaWRlcy5sZW5ndGg7XHJcbiAgICAgICAgLy8gU1lOQzpcclxuICAgICAgICBzbGlkZXIuc3luY0V4aXN0cyA9ICQoc2xpZGVyLnZhcnMuc3luYykubGVuZ3RoID4gMDtcclxuICAgICAgICAvLyBTTElERTpcclxuICAgICAgICBpZiAoc2xpZGVyLnZhcnMuYW5pbWF0aW9uID09PSBcInNsaWRlXCIpIHsgc2xpZGVyLnZhcnMuYW5pbWF0aW9uID0gXCJzd2luZ1wiOyB9XHJcbiAgICAgICAgc2xpZGVyLnByb3AgPSAodmVydGljYWwpID8gXCJ0b3BcIiA6IFwibWFyZ2luTGVmdFwiO1xyXG4gICAgICAgIHNsaWRlci5hcmdzID0ge307XHJcbiAgICAgICAgLy8gU0xJREVTSE9XOlxyXG4gICAgICAgIHNsaWRlci5tYW51YWxQYXVzZSA9IGZhbHNlO1xyXG4gICAgICAgIHNsaWRlci5zdG9wcGVkID0gZmFsc2U7XHJcbiAgICAgICAgLy9QQVVTRSBXSEVOIElOVklTSUJMRVxyXG4gICAgICAgIHNsaWRlci5zdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgc2xpZGVyLnN0YXJ0VGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgLy8gVE9VQ0gvVVNFQ1NTOlxyXG4gICAgICAgIHNsaWRlci50cmFuc2l0aW9ucyA9ICFzbGlkZXIudmFycy52aWRlbyAmJiAhZmFkZSAmJiBzbGlkZXIudmFycy51c2VDU1MgJiYgKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIG9iaiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxyXG4gICAgICAgICAgICAgIHByb3BzID0gWydwZXJzcGVjdGl2ZVByb3BlcnR5JywgJ1dlYmtpdFBlcnNwZWN0aXZlJywgJ01velBlcnNwZWN0aXZlJywgJ09QZXJzcGVjdGl2ZScsICdtc1BlcnNwZWN0aXZlJ107XHJcbiAgICAgICAgICBmb3IgKHZhciBpIGluIHByb3BzKSB7XHJcbiAgICAgICAgICAgIGlmICggb2JqLnN0eWxlWyBwcm9wc1tpXSBdICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgICAgICAgICAgc2xpZGVyLnBmeCA9IHByb3BzW2ldLnJlcGxhY2UoJ1BlcnNwZWN0aXZlJywnJykudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICBzbGlkZXIucHJvcCA9IFwiLVwiICsgc2xpZGVyLnBmeCArIFwiLXRyYW5zZm9ybVwiO1xyXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSgpKTtcclxuICAgICAgICBzbGlkZXIuZW5zdXJlQW5pbWF0aW9uRW5kID0gJyc7XHJcbiAgICAgICAgLy8gQ09OVFJPTFNDT05UQUlORVI6XHJcbiAgICAgICAgaWYgKHNsaWRlci52YXJzLmNvbnRyb2xzQ29udGFpbmVyICE9PSBcIlwiKSBzbGlkZXIuY29udHJvbHNDb250YWluZXIgPSAkKHNsaWRlci52YXJzLmNvbnRyb2xzQ29udGFpbmVyKS5sZW5ndGggPiAwICYmICQoc2xpZGVyLnZhcnMuY29udHJvbHNDb250YWluZXIpO1xyXG4gICAgICAgIC8vIE1BTlVBTDpcclxuICAgICAgICBpZiAoc2xpZGVyLnZhcnMubWFudWFsQ29udHJvbHMgIT09IFwiXCIpIHNsaWRlci5tYW51YWxDb250cm9scyA9ICQoc2xpZGVyLnZhcnMubWFudWFsQ29udHJvbHMpLmxlbmd0aCA+IDAgJiYgJChzbGlkZXIudmFycy5tYW51YWxDb250cm9scyk7XHJcblxyXG4gICAgICAgIC8vIFJBTkRPTUlaRTpcclxuICAgICAgICBpZiAoc2xpZGVyLnZhcnMucmFuZG9taXplKSB7XHJcbiAgICAgICAgICBzbGlkZXIuc2xpZGVzLnNvcnQoZnVuY3Rpb24oKSB7IHJldHVybiAoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKS0wLjUpOyB9KTtcclxuICAgICAgICAgIHNsaWRlci5jb250YWluZXIuZW1wdHkoKS5hcHBlbmQoc2xpZGVyLnNsaWRlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzbGlkZXIuZG9NYXRoKCk7XHJcblxyXG4gICAgICAgIC8vIElOSVRcclxuICAgICAgICBzbGlkZXIuc2V0dXAoXCJpbml0XCIpO1xyXG5cclxuICAgICAgICAvLyBDT05UUk9MTkFWOlxyXG4gICAgICAgIGlmIChzbGlkZXIudmFycy5jb250cm9sTmF2KSB7IG1ldGhvZHMuY29udHJvbE5hdi5zZXR1cCgpOyB9XHJcblxyXG4gICAgICAgIC8vIERJUkVDVElPTk5BVjpcclxuICAgICAgICBpZiAoc2xpZGVyLnZhcnMuZGlyZWN0aW9uTmF2KSB7IG1ldGhvZHMuZGlyZWN0aW9uTmF2LnNldHVwKCk7IH1cclxuXHJcbiAgICAgICAgLy8gS0VZQk9BUkQ6XHJcbiAgICAgICAgaWYgKHNsaWRlci52YXJzLmtleWJvYXJkICYmICgkKHNsaWRlci5jb250YWluZXJTZWxlY3RvcikubGVuZ3RoID09PSAxIHx8IHNsaWRlci52YXJzLm11bHRpcGxlS2V5Ym9hcmQpKSB7XHJcbiAgICAgICAgICAkKGRvY3VtZW50KS5iaW5kKCdrZXl1cCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBrZXljb2RlID0gZXZlbnQua2V5Q29kZTtcclxuICAgICAgICAgICAgaWYgKCFzbGlkZXIuYW5pbWF0aW5nICYmIChrZXljb2RlID09PSAzOSB8fCBrZXljb2RlID09PSAzNykpIHtcclxuICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gKGtleWNvZGUgPT09IDM5KSA/IHNsaWRlci5nZXRUYXJnZXQoJ25leHQnKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChrZXljb2RlID09PSAzNykgPyBzbGlkZXIuZ2V0VGFyZ2V0KCdwcmV2JykgOiBmYWxzZTtcclxuICAgICAgICAgICAgICBzbGlkZXIuZmxleEFuaW1hdGUodGFyZ2V0LCBzbGlkZXIudmFycy5wYXVzZU9uQWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE1PVVNFV0hFRUw6XHJcbiAgICAgICAgaWYgKHNsaWRlci52YXJzLm1vdXNld2hlZWwpIHtcclxuICAgICAgICAgIHNsaWRlci5iaW5kKCdtb3VzZXdoZWVsJywgZnVuY3Rpb24oZXZlbnQsIGRlbHRhLCBkZWx0YVgsIGRlbHRhWSkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gKGRlbHRhIDwgMCkgPyBzbGlkZXIuZ2V0VGFyZ2V0KCduZXh0JykgOiBzbGlkZXIuZ2V0VGFyZ2V0KCdwcmV2Jyk7XHJcbiAgICAgICAgICAgIHNsaWRlci5mbGV4QW5pbWF0ZSh0YXJnZXQsIHNsaWRlci52YXJzLnBhdXNlT25BY3Rpb24pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQQVVTRVBMQVlcclxuICAgICAgICBpZiAoc2xpZGVyLnZhcnMucGF1c2VQbGF5KSB7IG1ldGhvZHMucGF1c2VQbGF5LnNldHVwKCk7IH1cclxuXHJcbiAgICAgICAgLy9QQVVTRSBXSEVOIElOVklTSUJMRVxyXG4gICAgICAgIGlmIChzbGlkZXIudmFycy5zbGlkZXNob3cgJiYgc2xpZGVyLnZhcnMucGF1c2VJbnZpc2libGUpIHsgbWV0aG9kcy5wYXVzZUludmlzaWJsZS5pbml0KCk7IH1cclxuXHJcbiAgICAgICAgLy8gU0xJRFNFU0hPV1xyXG4gICAgICAgIGlmIChzbGlkZXIudmFycy5zbGlkZXNob3cpIHtcclxuICAgICAgICAgIGlmIChzbGlkZXIudmFycy5wYXVzZU9uSG92ZXIpIHtcclxuICAgICAgICAgICAgc2xpZGVyLmhvdmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGlmICghc2xpZGVyLm1hbnVhbFBsYXkgJiYgIXNsaWRlci5tYW51YWxQYXVzZSkgeyBzbGlkZXIucGF1c2UoKTsgfVxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBpZiAoIXNsaWRlci5tYW51YWxQYXVzZSAmJiAhc2xpZGVyLm1hbnVhbFBsYXkgJiYgIXNsaWRlci5zdG9wcGVkKSB7IHNsaWRlci5wbGF5KCk7IH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBpbml0aWFsaXplIGFuaW1hdGlvblxyXG4gICAgICAgICAgLy9JZiB3ZSdyZSB2aXNpYmxlLCBvciB3ZSBkb24ndCB1c2UgUGFnZVZpc2liaWxpdHkgQVBJXHJcbiAgICAgICAgICBpZighc2xpZGVyLnZhcnMucGF1c2VJbnZpc2libGUgfHwgIW1ldGhvZHMucGF1c2VJbnZpc2libGUuaXNIaWRkZW4oKSkge1xyXG4gICAgICAgICAgICAoc2xpZGVyLnZhcnMuaW5pdERlbGF5ID4gMCkgPyBzbGlkZXIuc3RhcnRUaW1lb3V0ID0gc2V0VGltZW91dChzbGlkZXIucGxheSwgc2xpZGVyLnZhcnMuaW5pdERlbGF5KSA6IHNsaWRlci5wbGF5KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBU05BVjpcclxuICAgICAgICBpZiAoYXNOYXYpIHsgbWV0aG9kcy5hc05hdi5zZXR1cCgpOyB9XHJcblxyXG4gICAgICAgIC8vIFRPVUNIXHJcbiAgICAgICAgaWYgKHRvdWNoICYmIHNsaWRlci52YXJzLnRvdWNoKSB7IG1ldGhvZHMudG91Y2goKTsgfVxyXG5cclxuICAgICAgICAvLyBGQURFJiZTTU9PVEhIRUlHSFQgfHwgU0xJREU6XHJcbiAgICAgICAgaWYgKCFmYWRlIHx8IChmYWRlICYmIHNsaWRlci52YXJzLnNtb290aEhlaWdodCkpIHsgJCh3aW5kb3cpLmJpbmQoXCJyZXNpemUgb3JpZW50YXRpb25jaGFuZ2UgZm9jdXNcIiwgbWV0aG9kcy5yZXNpemUpOyB9XHJcblxyXG4gICAgICAgIHNsaWRlci5maW5kKFwiaW1nXCIpLmF0dHIoXCJkcmFnZ2FibGVcIiwgXCJmYWxzZVwiKTtcclxuXHJcbiAgICAgICAgLy8gQVBJOiBzdGFydCgpIENhbGxiYWNrXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgc2xpZGVyLnZhcnMuc3RhcnQoc2xpZGVyKTtcclxuICAgICAgICB9LCAyMDApO1xyXG4gICAgICB9LFxyXG4gICAgICBhc05hdjoge1xyXG4gICAgICAgIHNldHVwOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNsaWRlci5hc05hdiA9IHRydWU7XHJcbiAgICAgICAgICBzbGlkZXIuYW5pbWF0aW5nVG8gPSBNYXRoLmZsb29yKHNsaWRlci5jdXJyZW50U2xpZGUvc2xpZGVyLm1vdmUpO1xyXG4gICAgICAgICAgc2xpZGVyLmN1cnJlbnRJdGVtID0gc2xpZGVyLmN1cnJlbnRTbGlkZTtcclxuICAgICAgICAgIHNsaWRlci5zbGlkZXMucmVtb3ZlQ2xhc3MobmFtZXNwYWNlICsgXCJhY3RpdmUtc2xpZGVcIikuZXEoc2xpZGVyLmN1cnJlbnRJdGVtKS5hZGRDbGFzcyhuYW1lc3BhY2UgKyBcImFjdGl2ZS1zbGlkZVwiKTtcclxuICAgICAgICAgIGlmKCFtc0dlc3R1cmUpe1xyXG4gICAgICAgICAgICAgIHNsaWRlci5zbGlkZXMub24oZXZlbnRUeXBlLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciAkc2xpZGUgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9ICRzbGlkZS5pbmRleCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvc0Zyb21MZWZ0ID0gJHNsaWRlLm9mZnNldCgpLmxlZnQgLSAkKHNsaWRlcikuc2Nyb2xsTGVmdCgpOyAvLyBGaW5kIHBvc2l0aW9uIG9mIHNsaWRlIHJlbGF0aXZlIHRvIGxlZnQgb2Ygc2xpZGVyIGNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgaWYoIHBvc0Zyb21MZWZ0IDw9IDAgJiYgJHNsaWRlLmhhc0NsYXNzKCBuYW1lc3BhY2UgKyAnYWN0aXZlLXNsaWRlJyApICkge1xyXG4gICAgICAgICAgICAgICAgICBzbGlkZXIuZmxleEFuaW1hdGUoc2xpZGVyLmdldFRhcmdldChcInByZXZcIiksIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghJChzbGlkZXIudmFycy5hc05hdkZvcikuZGF0YSgnZmxleHNsaWRlcicpLmFuaW1hdGluZyAmJiAhJHNsaWRlLmhhc0NsYXNzKG5hbWVzcGFjZSArIFwiYWN0aXZlLXNsaWRlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHNsaWRlci5kaXJlY3Rpb24gPSAoc2xpZGVyLmN1cnJlbnRJdGVtIDwgdGFyZ2V0KSA/IFwibmV4dFwiIDogXCJwcmV2XCI7XHJcbiAgICAgICAgICAgICAgICAgIHNsaWRlci5mbGV4QW5pbWF0ZSh0YXJnZXQsIHNsaWRlci52YXJzLnBhdXNlT25BY3Rpb24sIGZhbHNlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgIGVsLl9zbGlkZXIgPSBzbGlkZXI7XHJcbiAgICAgICAgICAgICAgc2xpZGVyLnNsaWRlcy5lYWNoKGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgIHRoYXQuX2dlc3R1cmUgPSBuZXcgTVNHZXN0dXJlKCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoYXQuX2dlc3R1cmUudGFyZ2V0ID0gdGhhdDtcclxuICAgICAgICAgICAgICAgICAgdGhhdC5hZGRFdmVudExpc3RlbmVyKFwiTVNQb2ludGVyRG93blwiLCBmdW5jdGlvbiAoZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZihlLmN1cnJlbnRUYXJnZXQuX2dlc3R1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0Ll9nZXN0dXJlLmFkZFBvaW50ZXIoZS5wb2ludGVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgIHRoYXQuYWRkRXZlbnRMaXN0ZW5lcihcIk1TR2VzdHVyZVRhcFwiLCBmdW5jdGlvbiAoZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgJHNsaWRlID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSAkc2xpZGUuaW5kZXgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmICghJChzbGlkZXIudmFycy5hc05hdkZvcikuZGF0YSgnZmxleHNsaWRlcicpLmFuaW1hdGluZyAmJiAhJHNsaWRlLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5kaXJlY3Rpb24gPSAoc2xpZGVyLmN1cnJlbnRJdGVtIDwgdGFyZ2V0KSA/IFwibmV4dFwiIDogXCJwcmV2XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLmZsZXhBbmltYXRlKHRhcmdldCwgc2xpZGVyLnZhcnMucGF1c2VPbkFjdGlvbiwgZmFsc2UsIHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbnRyb2xOYXY6IHtcclxuICAgICAgICBzZXR1cDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoIXNsaWRlci5tYW51YWxDb250cm9scykge1xyXG4gICAgICAgICAgICBtZXRob2RzLmNvbnRyb2xOYXYuc2V0dXBQYWdpbmcoKTtcclxuICAgICAgICAgIH0gZWxzZSB7IC8vIE1BTlVBTENPTlRST0xTOlxyXG4gICAgICAgICAgICBtZXRob2RzLmNvbnRyb2xOYXYuc2V0dXBNYW51YWwoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldHVwUGFnaW5nOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciB0eXBlID0gKHNsaWRlci52YXJzLmNvbnRyb2xOYXYgPT09IFwidGh1bWJuYWlsc1wiKSA/ICdjb250cm9sLXRodW1icycgOiAnY29udHJvbC1wYWdpbmcnLFxyXG4gICAgICAgICAgICAgIGogPSAxLFxyXG4gICAgICAgICAgICAgIGl0ZW0sXHJcbiAgICAgICAgICAgICAgc2xpZGU7XHJcblxyXG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xOYXZTY2FmZm9sZCA9ICQoJzxvbCBjbGFzcz1cIicrIG5hbWVzcGFjZSArICdjb250cm9sLW5hdiAnICsgbmFtZXNwYWNlICsgdHlwZSArICdcIj48L29sPicpO1xyXG5cclxuICAgICAgICAgIGlmIChzbGlkZXIucGFnaW5nQ291bnQgPiAxKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpZGVyLnBhZ2luZ0NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICBzbGlkZSA9IHNsaWRlci5zbGlkZXMuZXEoaSk7XHJcbiAgICAgICAgICAgICAgaXRlbSA9IChzbGlkZXIudmFycy5jb250cm9sTmF2ID09PSBcInRodW1ibmFpbHNcIikgPyAnPGltZyBzcmM9XCInICsgc2xpZGUuYXR0ciggJ2RhdGEtdGh1bWInICkgKyAnXCIvPicgOiAnPGE+JyArIGogKyAnPC9hPic7XHJcbiAgICAgICAgICAgICAgaWYgKCAndGh1bWJuYWlscycgPT09IHNsaWRlci52YXJzLmNvbnRyb2xOYXYgJiYgdHJ1ZSA9PT0gc2xpZGVyLnZhcnMudGh1bWJDYXB0aW9ucyApIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYXB0biA9IHNsaWRlLmF0dHIoICdkYXRhLXRodW1iY2FwdGlvbicgKTtcclxuICAgICAgICAgICAgICAgIGlmICggJycgIT0gY2FwdG4gJiYgdW5kZWZpbmVkICE9IGNhcHRuICkgeyBpdGVtICs9ICc8c3BhbiBjbGFzcz1cIicgKyBuYW1lc3BhY2UgKyAnY2FwdGlvblwiPicgKyBjYXB0biArICc8L3NwYW4+JzsgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBzbGlkZXIuY29udHJvbE5hdlNjYWZmb2xkLmFwcGVuZCgnPGxpPicgKyBpdGVtICsgJzwvbGk+Jyk7XHJcbiAgICAgICAgICAgICAgaisrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gQ09OVFJPTFNDT05UQUlORVI6XHJcbiAgICAgICAgICAoc2xpZGVyLmNvbnRyb2xzQ29udGFpbmVyKSA/ICQoc2xpZGVyLmNvbnRyb2xzQ29udGFpbmVyKS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xOYXZTY2FmZm9sZCkgOiBzbGlkZXIuYXBwZW5kKHNsaWRlci5jb250cm9sTmF2U2NhZmZvbGQpO1xyXG4gICAgICAgICAgbWV0aG9kcy5jb250cm9sTmF2LnNldCgpO1xyXG5cclxuICAgICAgICAgIG1ldGhvZHMuY29udHJvbE5hdi5hY3RpdmUoKTtcclxuXHJcbiAgICAgICAgICBzbGlkZXIuY29udHJvbE5hdlNjYWZmb2xkLmRlbGVnYXRlKCdhLCBpbWcnLCBldmVudFR5cGUsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAod2F0Y2hlZEV2ZW50ID09PSBcIlwiIHx8IHdhdGNoZWRFdmVudCA9PT0gZXZlbnQudHlwZSkge1xyXG4gICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHNsaWRlci5jb250cm9sTmF2LmluZGV4KCR0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKCEkdGhpcy5oYXNDbGFzcyhuYW1lc3BhY2UgKyAnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgIHNsaWRlci5kaXJlY3Rpb24gPSAodGFyZ2V0ID4gc2xpZGVyLmN1cnJlbnRTbGlkZSkgPyBcIm5leHRcIiA6IFwicHJldlwiO1xyXG4gICAgICAgICAgICAgICAgc2xpZGVyLmZsZXhBbmltYXRlKHRhcmdldCwgc2xpZGVyLnZhcnMucGF1c2VPbkFjdGlvbik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzZXR1cCBmbGFncyB0byBwcmV2ZW50IGV2ZW50IGR1cGxpY2F0aW9uXHJcbiAgICAgICAgICAgIGlmICh3YXRjaGVkRXZlbnQgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICB3YXRjaGVkRXZlbnQgPSBldmVudC50eXBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1ldGhvZHMuc2V0VG9DbGVhcldhdGNoZWRFdmVudCgpO1xyXG5cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0dXBNYW51YWw6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xOYXYgPSBzbGlkZXIubWFudWFsQ29udHJvbHM7XHJcbiAgICAgICAgICBtZXRob2RzLmNvbnRyb2xOYXYuYWN0aXZlKCk7XHJcblxyXG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xOYXYuYmluZChldmVudFR5cGUsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAod2F0Y2hlZEV2ZW50ID09PSBcIlwiIHx8IHdhdGNoZWRFdmVudCA9PT0gZXZlbnQudHlwZSkge1xyXG4gICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHNsaWRlci5jb250cm9sTmF2LmluZGV4KCR0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKCEkdGhpcy5oYXNDbGFzcyhuYW1lc3BhY2UgKyAnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICh0YXJnZXQgPiBzbGlkZXIuY3VycmVudFNsaWRlKSA/IHNsaWRlci5kaXJlY3Rpb24gPSBcIm5leHRcIiA6IHNsaWRlci5kaXJlY3Rpb24gPSBcInByZXZcIjtcclxuICAgICAgICAgICAgICAgIHNsaWRlci5mbGV4QW5pbWF0ZSh0YXJnZXQsIHNsaWRlci52YXJzLnBhdXNlT25BY3Rpb24pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gc2V0dXAgZmxhZ3MgdG8gcHJldmVudCBldmVudCBkdXBsaWNhdGlvblxyXG4gICAgICAgICAgICBpZiAod2F0Y2hlZEV2ZW50ID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgd2F0Y2hlZEV2ZW50ID0gZXZlbnQudHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZXRob2RzLnNldFRvQ2xlYXJXYXRjaGVkRXZlbnQoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBzZWxlY3RvciA9IChzbGlkZXIudmFycy5jb250cm9sTmF2ID09PSBcInRodW1ibmFpbHNcIikgPyAnaW1nJyA6ICdhJztcclxuICAgICAgICAgIHNsaWRlci5jb250cm9sTmF2ID0gJCgnLicgKyBuYW1lc3BhY2UgKyAnY29udHJvbC1uYXYgbGkgJyArIHNlbGVjdG9yLCAoc2xpZGVyLmNvbnRyb2xzQ29udGFpbmVyKSA/IHNsaWRlci5jb250cm9sc0NvbnRhaW5lciA6IHNsaWRlcik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhY3RpdmU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xOYXYucmVtb3ZlQ2xhc3MobmFtZXNwYWNlICsgXCJhY3RpdmVcIikuZXEoc2xpZGVyLmFuaW1hdGluZ1RvKS5hZGRDbGFzcyhuYW1lc3BhY2UgKyBcImFjdGl2ZVwiKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oYWN0aW9uLCBwb3MpIHtcclxuICAgICAgICAgIGlmIChzbGlkZXIucGFnaW5nQ291bnQgPiAxICYmIGFjdGlvbiA9PT0gXCJhZGRcIikge1xyXG4gICAgICAgICAgICBzbGlkZXIuY29udHJvbE5hdlNjYWZmb2xkLmFwcGVuZCgkKCc8bGk+PGE+JyArIHNsaWRlci5jb3VudCArICc8L2E+PC9saT4nKSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHNsaWRlci5wYWdpbmdDb3VudCA9PT0gMSkge1xyXG4gICAgICAgICAgICBzbGlkZXIuY29udHJvbE5hdlNjYWZmb2xkLmZpbmQoJ2xpJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzbGlkZXIuY29udHJvbE5hdi5lcShwb3MpLmNsb3Nlc3QoJ2xpJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBtZXRob2RzLmNvbnRyb2xOYXYuc2V0KCk7XHJcbiAgICAgICAgICAoc2xpZGVyLnBhZ2luZ0NvdW50ID4gMSAmJiBzbGlkZXIucGFnaW5nQ291bnQgIT09IHNsaWRlci5jb250cm9sTmF2Lmxlbmd0aCkgPyBzbGlkZXIudXBkYXRlKHBvcywgYWN0aW9uKSA6IG1ldGhvZHMuY29udHJvbE5hdi5hY3RpdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGRpcmVjdGlvbk5hdjoge1xyXG4gICAgICAgIHNldHVwOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBkaXJlY3Rpb25OYXZTY2FmZm9sZCA9ICQoJzx1bCBjbGFzcz1cIicgKyBuYW1lc3BhY2UgKyAnZGlyZWN0aW9uLW5hdlwiPjxsaSBjbGFzcz1cIicgKyBuYW1lc3BhY2UgKyAnbmF2LXByZXZcIj48YSBjbGFzcz1cIicgKyBuYW1lc3BhY2UgKyAncHJldlwiIGhyZWY9XCIjXCI+JyArIHNsaWRlci52YXJzLnByZXZUZXh0ICsgJzwvYT48L2xpPjxsaSBjbGFzcz1cIicgKyBuYW1lc3BhY2UgKyAnbmF2LW5leHRcIj48YSBjbGFzcz1cIicgKyBuYW1lc3BhY2UgKyAnbmV4dFwiIGhyZWY9XCIjXCI+JyArIHNsaWRlci52YXJzLm5leHRUZXh0ICsgJzwvYT48L2xpPjwvdWw+Jyk7XHJcblxyXG4gICAgICAgICAgLy8gQ09OVFJPTFNDT05UQUlORVI6XHJcbiAgICAgICAgICBpZiAoc2xpZGVyLmNvbnRyb2xzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICQoc2xpZGVyLmNvbnRyb2xzQ29udGFpbmVyKS5hcHBlbmQoZGlyZWN0aW9uTmF2U2NhZmZvbGQpO1xyXG4gICAgICAgICAgICBzbGlkZXIuZGlyZWN0aW9uTmF2ID0gJCgnLicgKyBuYW1lc3BhY2UgKyAnZGlyZWN0aW9uLW5hdiBsaSBhJywgc2xpZGVyLmNvbnRyb2xzQ29udGFpbmVyKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNsaWRlci5hcHBlbmQoZGlyZWN0aW9uTmF2U2NhZmZvbGQpO1xyXG4gICAgICAgICAgICBzbGlkZXIuZGlyZWN0aW9uTmF2ID0gJCgnLicgKyBuYW1lc3BhY2UgKyAnZGlyZWN0aW9uLW5hdiBsaSBhJywgc2xpZGVyKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBtZXRob2RzLmRpcmVjdGlvbk5hdi51cGRhdGUoKTtcclxuXHJcbiAgICAgICAgICBzbGlkZXIuZGlyZWN0aW9uTmF2LmJpbmQoZXZlbnRUeXBlLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgaWYgKHdhdGNoZWRFdmVudCA9PT0gXCJcIiB8fCB3YXRjaGVkRXZlbnQgPT09IGV2ZW50LnR5cGUpIHtcclxuICAgICAgICAgICAgICB0YXJnZXQgPSAoJCh0aGlzKS5oYXNDbGFzcyhuYW1lc3BhY2UgKyAnbmV4dCcpKSA/IHNsaWRlci5nZXRUYXJnZXQoJ25leHQnKSA6IHNsaWRlci5nZXRUYXJnZXQoJ3ByZXYnKTtcclxuICAgICAgICAgICAgICBzbGlkZXIuZmxleEFuaW1hdGUodGFyZ2V0LCBzbGlkZXIudmFycy5wYXVzZU9uQWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gc2V0dXAgZmxhZ3MgdG8gcHJldmVudCBldmVudCBkdXBsaWNhdGlvblxyXG4gICAgICAgICAgICBpZiAod2F0Y2hlZEV2ZW50ID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgd2F0Y2hlZEV2ZW50ID0gZXZlbnQudHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZXRob2RzLnNldFRvQ2xlYXJXYXRjaGVkRXZlbnQoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdXBkYXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBkaXNhYmxlZENsYXNzID0gbmFtZXNwYWNlICsgJ2Rpc2FibGVkJztcclxuICAgICAgICAgIGlmIChzbGlkZXIucGFnaW5nQ291bnQgPT09IDEpIHtcclxuICAgICAgICAgICAgc2xpZGVyLmRpcmVjdGlvbk5hdi5hZGRDbGFzcyhkaXNhYmxlZENsYXNzKS5hdHRyKCd0YWJpbmRleCcsICctMScpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICghc2xpZGVyLnZhcnMuYW5pbWF0aW9uTG9vcCkge1xyXG4gICAgICAgICAgICBpZiAoc2xpZGVyLmFuaW1hdGluZ1RvID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgc2xpZGVyLmRpcmVjdGlvbk5hdi5yZW1vdmVDbGFzcyhkaXNhYmxlZENsYXNzKS5maWx0ZXIoJy4nICsgbmFtZXNwYWNlICsgXCJwcmV2XCIpLmFkZENsYXNzKGRpc2FibGVkQ2xhc3MpLmF0dHIoJ3RhYmluZGV4JywgJy0xJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLmFuaW1hdGluZ1RvID09PSBzbGlkZXIubGFzdCkge1xyXG4gICAgICAgICAgICAgIHNsaWRlci5kaXJlY3Rpb25OYXYucmVtb3ZlQ2xhc3MoZGlzYWJsZWRDbGFzcykuZmlsdGVyKCcuJyArIG5hbWVzcGFjZSArIFwibmV4dFwiKS5hZGRDbGFzcyhkaXNhYmxlZENsYXNzKS5hdHRyKCd0YWJpbmRleCcsICctMScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNsaWRlci5kaXJlY3Rpb25OYXYucmVtb3ZlQ2xhc3MoZGlzYWJsZWRDbGFzcykucmVtb3ZlQXR0cigndGFiaW5kZXgnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2xpZGVyLmRpcmVjdGlvbk5hdi5yZW1vdmVDbGFzcyhkaXNhYmxlZENsYXNzKS5yZW1vdmVBdHRyKCd0YWJpbmRleCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgcGF1c2VQbGF5OiB7XHJcbiAgICAgICAgc2V0dXA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHBhdXNlUGxheVNjYWZmb2xkID0gJCgnPGRpdiBjbGFzcz1cIicgKyBuYW1lc3BhY2UgKyAncGF1c2VwbGF5XCI+PGE+PC9hPjwvZGl2PicpO1xyXG5cclxuICAgICAgICAgIC8vIENPTlRST0xTQ09OVEFJTkVSOlxyXG4gICAgICAgICAgaWYgKHNsaWRlci5jb250cm9sc0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICBzbGlkZXIuY29udHJvbHNDb250YWluZXIuYXBwZW5kKHBhdXNlUGxheVNjYWZmb2xkKTtcclxuICAgICAgICAgICAgc2xpZGVyLnBhdXNlUGxheSA9ICQoJy4nICsgbmFtZXNwYWNlICsgJ3BhdXNlcGxheSBhJywgc2xpZGVyLmNvbnRyb2xzQ29udGFpbmVyKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNsaWRlci5hcHBlbmQocGF1c2VQbGF5U2NhZmZvbGQpO1xyXG4gICAgICAgICAgICBzbGlkZXIucGF1c2VQbGF5ID0gJCgnLicgKyBuYW1lc3BhY2UgKyAncGF1c2VwbGF5IGEnLCBzbGlkZXIpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIG1ldGhvZHMucGF1c2VQbGF5LnVwZGF0ZSgoc2xpZGVyLnZhcnMuc2xpZGVzaG93KSA/IG5hbWVzcGFjZSArICdwYXVzZScgOiBuYW1lc3BhY2UgKyAncGxheScpO1xyXG5cclxuICAgICAgICAgIHNsaWRlci5wYXVzZVBsYXkuYmluZChldmVudFR5cGUsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAod2F0Y2hlZEV2ZW50ID09PSBcIlwiIHx8IHdhdGNoZWRFdmVudCA9PT0gZXZlbnQudHlwZSkge1xyXG4gICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKG5hbWVzcGFjZSArICdwYXVzZScpKSB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXIubWFudWFsUGF1c2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc2xpZGVyLm1hbnVhbFBsYXkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHNsaWRlci5wYXVzZSgpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXIubWFudWFsUGF1c2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHNsaWRlci5tYW51YWxQbGF5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNsaWRlci5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzZXR1cCBmbGFncyB0byBwcmV2ZW50IGV2ZW50IGR1cGxpY2F0aW9uXHJcbiAgICAgICAgICAgIGlmICh3YXRjaGVkRXZlbnQgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICB3YXRjaGVkRXZlbnQgPSBldmVudC50eXBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1ldGhvZHMuc2V0VG9DbGVhcldhdGNoZWRFdmVudCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKHN0YXRlKSB7XHJcbiAgICAgICAgICAoc3RhdGUgPT09IFwicGxheVwiKSA/IHNsaWRlci5wYXVzZVBsYXkucmVtb3ZlQ2xhc3MobmFtZXNwYWNlICsgJ3BhdXNlJykuYWRkQ2xhc3MobmFtZXNwYWNlICsgJ3BsYXknKS5odG1sKHNsaWRlci52YXJzLnBsYXlUZXh0KSA6IHNsaWRlci5wYXVzZVBsYXkucmVtb3ZlQ2xhc3MobmFtZXNwYWNlICsgJ3BsYXknKS5hZGRDbGFzcyhuYW1lc3BhY2UgKyAncGF1c2UnKS5odG1sKHNsaWRlci52YXJzLnBhdXNlVGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB0b3VjaDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHN0YXJ0WCxcclxuICAgICAgICAgIHN0YXJ0WSxcclxuICAgICAgICAgIG9mZnNldCxcclxuICAgICAgICAgIGN3aWR0aCxcclxuICAgICAgICAgIGR4LFxyXG4gICAgICAgICAgc3RhcnRULFxyXG4gICAgICAgICAgc2Nyb2xsaW5nID0gZmFsc2UsXHJcbiAgICAgICAgICBsb2NhbFggPSAwLFxyXG4gICAgICAgICAgbG9jYWxZID0gMCxcclxuICAgICAgICAgIGFjY0R4ID0gMDtcclxuXHJcbiAgICAgICAgaWYoIW1zR2VzdHVyZSl7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uVG91Y2hTdGFydChlKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHNsaWRlci5hbmltYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCAoIHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCApIHx8IGUudG91Y2hlcy5sZW5ndGggPT09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXIucGF1c2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIENBUk9VU0VMOlxyXG4gICAgICAgICAgICAgICAgY3dpZHRoID0gKHZlcnRpY2FsKSA/IHNsaWRlci5oIDogc2xpZGVyLiB3O1xyXG4gICAgICAgICAgICAgICAgc3RhcnRUID0gTnVtYmVyKG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICAgICAgLy8gQ0FST1VTRUw6XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTG9jYWwgdmFycyBmb3IgWCBhbmQgWSBwb2ludHMuXHJcbiAgICAgICAgICAgICAgICBsb2NhbFggPSBlLnRvdWNoZXNbMF0ucGFnZVg7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFkgPSBlLnRvdWNoZXNbMF0ucGFnZVk7XHJcblxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGNhcm91c2VsICYmIHJldmVyc2UgJiYgc2xpZGVyLmFuaW1hdGluZ1RvID09PSBzbGlkZXIubGFzdCkgPyAwIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgIChjYXJvdXNlbCAmJiByZXZlcnNlKSA/IHNsaWRlci5saW1pdCAtICgoKHNsaWRlci5pdGVtVyArIHNsaWRlci52YXJzLml0ZW1NYXJnaW4pICogc2xpZGVyLm1vdmUpICogc2xpZGVyLmFuaW1hdGluZ1RvKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAoY2Fyb3VzZWwgJiYgc2xpZGVyLmN1cnJlbnRTbGlkZSA9PT0gc2xpZGVyLmxhc3QpID8gc2xpZGVyLmxpbWl0IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgIChjYXJvdXNlbCkgPyAoKHNsaWRlci5pdGVtVyArIHNsaWRlci52YXJzLml0ZW1NYXJnaW4pICogc2xpZGVyLm1vdmUpICogc2xpZGVyLmN1cnJlbnRTbGlkZSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAocmV2ZXJzZSkgPyAoc2xpZGVyLmxhc3QgLSBzbGlkZXIuY3VycmVudFNsaWRlICsgc2xpZGVyLmNsb25lT2Zmc2V0KSAqIGN3aWR0aCA6IChzbGlkZXIuY3VycmVudFNsaWRlICsgc2xpZGVyLmNsb25lT2Zmc2V0KSAqIGN3aWR0aDtcclxuICAgICAgICAgICAgICAgIHN0YXJ0WCA9ICh2ZXJ0aWNhbCkgPyBsb2NhbFkgOiBsb2NhbFg7XHJcbiAgICAgICAgICAgICAgICBzdGFydFkgPSAodmVydGljYWwpID8gbG9jYWxYIDogbG9jYWxZO1xyXG5cclxuICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uVG91Y2hNb3ZlKGUpIHtcclxuICAgICAgICAgICAgICAvLyBMb2NhbCB2YXJzIGZvciBYIGFuZCBZIHBvaW50cy5cclxuXHJcbiAgICAgICAgICAgICAgbG9jYWxYID0gZS50b3VjaGVzWzBdLnBhZ2VYO1xyXG4gICAgICAgICAgICAgIGxvY2FsWSA9IGUudG91Y2hlc1swXS5wYWdlWTtcclxuXHJcbiAgICAgICAgICAgICAgZHggPSAodmVydGljYWwpID8gc3RhcnRYIC0gbG9jYWxZIDogc3RhcnRYIC0gbG9jYWxYO1xyXG4gICAgICAgICAgICAgIHNjcm9sbGluZyA9ICh2ZXJ0aWNhbCkgPyAoTWF0aC5hYnMoZHgpIDwgTWF0aC5hYnMobG9jYWxYIC0gc3RhcnRZKSkgOiAoTWF0aC5hYnMoZHgpIDwgTWF0aC5hYnMobG9jYWxZIC0gc3RhcnRZKSk7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBmeG1zID0gNTAwO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoICEgc2Nyb2xsaW5nIHx8IE51bWJlciggbmV3IERhdGUoKSApIC0gc3RhcnRUID4gZnhtcyApIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGlmICghZmFkZSAmJiBzbGlkZXIudHJhbnNpdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKCFzbGlkZXIudmFycy5hbmltYXRpb25Mb29wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHggPSBkeC8oKHNsaWRlci5jdXJyZW50U2xpZGUgPT09IDAgJiYgZHggPCAwIHx8IHNsaWRlci5jdXJyZW50U2xpZGUgPT09IHNsaWRlci5sYXN0ICYmIGR4ID4gMCkgPyAoTWF0aC5hYnMoZHgpL2N3aWR0aCsyKSA6IDEpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHNsaWRlci5zZXRQcm9wcyhvZmZzZXQgKyBkeCwgXCJzZXRUb3VjaFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uVG91Y2hFbmQoZSkge1xyXG4gICAgICAgICAgICAgIC8vIGZpbmlzaCB0aGUgdG91Y2ggYnkgdW5kb2luZyB0aGUgdG91Y2ggc2Vzc2lvblxyXG4gICAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChzbGlkZXIuYW5pbWF0aW5nVG8gPT09IHNsaWRlci5jdXJyZW50U2xpZGUgJiYgIXNjcm9sbGluZyAmJiAhKGR4ID09PSBudWxsKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVwZGF0ZUR4ID0gKHJldmVyc2UpID8gLWR4IDogZHgsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gKHVwZGF0ZUR4ID4gMCkgPyBzbGlkZXIuZ2V0VGFyZ2V0KCduZXh0JykgOiBzbGlkZXIuZ2V0VGFyZ2V0KCdwcmV2Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlci5jYW5BZHZhbmNlKHRhcmdldCkgJiYgKE51bWJlcihuZXcgRGF0ZSgpKSAtIHN0YXJ0VCA8IDU1MCAmJiBNYXRoLmFicyh1cGRhdGVEeCkgPiA1MCB8fCBNYXRoLmFicyh1cGRhdGVEeCkgPiBjd2lkdGgvMikpIHtcclxuICAgICAgICAgICAgICAgICAgc2xpZGVyLmZsZXhBbmltYXRlKHRhcmdldCwgc2xpZGVyLnZhcnMucGF1c2VPbkFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoIWZhZGUpIHsgc2xpZGVyLmZsZXhBbmltYXRlKHNsaWRlci5jdXJyZW50U2xpZGUsIHNsaWRlci52YXJzLnBhdXNlT25BY3Rpb24sIHRydWUpOyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgICBzdGFydFggPSBudWxsO1xyXG4gICAgICAgICAgICAgIHN0YXJ0WSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgZHggPSBudWxsO1xyXG4gICAgICAgICAgICAgIG9mZnNldCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZWwuc3R5bGUubXNUb3VjaEFjdGlvbiA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICBlbC5fZ2VzdHVyZSA9IG5ldyBNU0dlc3R1cmUoKTtcclxuICAgICAgICAgICAgZWwuX2dlc3R1cmUudGFyZ2V0ID0gZWw7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJNU1BvaW50ZXJEb3duXCIsIG9uTVNQb2ludGVyRG93biwgZmFsc2UpO1xyXG4gICAgICAgICAgICBlbC5fc2xpZGVyID0gc2xpZGVyO1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiTVNHZXN0dXJlQ2hhbmdlXCIsIG9uTVNHZXN0dXJlQ2hhbmdlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJNU0dlc3R1cmVFbmRcIiwgb25NU0dlc3R1cmVFbmQsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTVNQb2ludGVyRG93bihlKXtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2xpZGVyLmFuaW1hdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlci5wYXVzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLl9nZXN0dXJlLmFkZFBvaW50ZXIoZS5wb2ludGVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY0R4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBjd2lkdGggPSAodmVydGljYWwpID8gc2xpZGVyLmggOiBzbGlkZXIuIHc7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUID0gTnVtYmVyKG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENBUk9VU0VMOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAoY2Fyb3VzZWwgJiYgcmV2ZXJzZSAmJiBzbGlkZXIuYW5pbWF0aW5nVG8gPT09IHNsaWRlci5sYXN0KSA/IDAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2Fyb3VzZWwgJiYgcmV2ZXJzZSkgPyBzbGlkZXIubGltaXQgLSAoKChzbGlkZXIuaXRlbVcgKyBzbGlkZXIudmFycy5pdGVtTWFyZ2luKSAqIHNsaWRlci5tb3ZlKSAqIHNsaWRlci5hbmltYXRpbmdUbykgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNhcm91c2VsICYmIHNsaWRlci5jdXJyZW50U2xpZGUgPT09IHNsaWRlci5sYXN0KSA/IHNsaWRlci5saW1pdCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNhcm91c2VsKSA/ICgoc2xpZGVyLml0ZW1XICsgc2xpZGVyLnZhcnMuaXRlbU1hcmdpbikgKiBzbGlkZXIubW92ZSkgKiBzbGlkZXIuY3VycmVudFNsaWRlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJldmVyc2UpID8gKHNsaWRlci5sYXN0IC0gc2xpZGVyLmN1cnJlbnRTbGlkZSArIHNsaWRlci5jbG9uZU9mZnNldCkgKiBjd2lkdGggOiAoc2xpZGVyLmN1cnJlbnRTbGlkZSArIHNsaWRlci5jbG9uZU9mZnNldCkgKiBjd2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTVNHZXN0dXJlQ2hhbmdlKGUpIHtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2xpZGVyID0gZS50YXJnZXQuX3NsaWRlcjtcclxuICAgICAgICAgICAgICAgIGlmKCFzbGlkZXIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB0cmFuc1ggPSAtZS50cmFuc2xhdGlvblgsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNZID0gLWUudHJhbnNsYXRpb25ZO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vQWNjdW11bGF0ZSB0cmFuc2xhdGlvbnMuXHJcbiAgICAgICAgICAgICAgICBhY2NEeCA9IGFjY0R4ICsgKCh2ZXJ0aWNhbCkgPyB0cmFuc1kgOiB0cmFuc1gpO1xyXG4gICAgICAgICAgICAgICAgZHggPSBhY2NEeDtcclxuICAgICAgICAgICAgICAgIHNjcm9sbGluZyA9ICh2ZXJ0aWNhbCkgPyAoTWF0aC5hYnMoYWNjRHgpIDwgTWF0aC5hYnMoLXRyYW5zWCkpIDogKE1hdGguYWJzKGFjY0R4KSA8IE1hdGguYWJzKC10cmFuc1kpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihlLmRldGFpbCA9PT0gZS5NU0dFU1RVUkVfRkxBR19JTkVSVElBKXtcclxuICAgICAgICAgICAgICAgICAgICBzZXRJbW1lZGlhdGUoZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLl9nZXN0dXJlLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghc2Nyb2xsaW5nIHx8IE51bWJlcihuZXcgRGF0ZSgpKSAtIHN0YXJ0VCA+IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZhZGUgJiYgc2xpZGVyLnRyYW5zaXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2xpZGVyLnZhcnMuYW5pbWF0aW9uTG9vcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHggPSBhY2NEeCAvICgoc2xpZGVyLmN1cnJlbnRTbGlkZSA9PT0gMCAmJiBhY2NEeCA8IDAgfHwgc2xpZGVyLmN1cnJlbnRTbGlkZSA9PT0gc2xpZGVyLmxhc3QgJiYgYWNjRHggPiAwKSA/IChNYXRoLmFicyhhY2NEeCkgLyBjd2lkdGggKyAyKSA6IDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5zZXRQcm9wcyhvZmZzZXQgKyBkeCwgXCJzZXRUb3VjaFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTVNHZXN0dXJlRW5kKGUpIHtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2xpZGVyID0gZS50YXJnZXQuX3NsaWRlcjtcclxuICAgICAgICAgICAgICAgIGlmKCFzbGlkZXIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzbGlkZXIuYW5pbWF0aW5nVG8gPT09IHNsaWRlci5jdXJyZW50U2xpZGUgJiYgIXNjcm9sbGluZyAmJiAhKGR4ID09PSBudWxsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVEeCA9IChyZXZlcnNlKSA/IC1keCA6IGR4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSAodXBkYXRlRHggPiAwKSA/IHNsaWRlci5nZXRUYXJnZXQoJ25leHQnKSA6IHNsaWRlci5nZXRUYXJnZXQoJ3ByZXYnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlci5jYW5BZHZhbmNlKHRhcmdldCkgJiYgKE51bWJlcihuZXcgRGF0ZSgpKSAtIHN0YXJ0VCA8IDU1MCAmJiBNYXRoLmFicyh1cGRhdGVEeCkgPiA1MCB8fCBNYXRoLmFicyh1cGRhdGVEeCkgPiBjd2lkdGgvMikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLmZsZXhBbmltYXRlKHRhcmdldCwgc2xpZGVyLnZhcnMucGF1c2VPbkFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmYWRlKSB7IHNsaWRlci5mbGV4QW5pbWF0ZShzbGlkZXIuY3VycmVudFNsaWRlLCBzbGlkZXIudmFycy5wYXVzZU9uQWN0aW9uLCB0cnVlKTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzdGFydFggPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRZID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGR4ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIG9mZnNldCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBhY2NEeCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCFzbGlkZXIuYW5pbWF0aW5nICYmIHNsaWRlci5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgaWYgKCFjYXJvdXNlbCkgeyBzbGlkZXIuZG9NYXRoKCk7IH1cclxuXHJcbiAgICAgICAgICBpZiAoZmFkZSkge1xyXG4gICAgICAgICAgICAvLyBTTU9PVEggSEVJR0hUOlxyXG4gICAgICAgICAgICBtZXRob2RzLnNtb290aEhlaWdodCgpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChjYXJvdXNlbCkgeyAvL0NBUk9VU0VMOlxyXG4gICAgICAgICAgICBzbGlkZXIuc2xpZGVzLndpZHRoKHNsaWRlci5jb21wdXRlZFcpO1xyXG4gICAgICAgICAgICBzbGlkZXIudXBkYXRlKHNsaWRlci5wYWdpbmdDb3VudCk7XHJcbiAgICAgICAgICAgIHNsaWRlci5zZXRQcm9wcygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAodmVydGljYWwpIHsgLy9WRVJUSUNBTDpcclxuICAgICAgICAgICAgc2xpZGVyLnZpZXdwb3J0LmhlaWdodChzbGlkZXIuaCk7XHJcbiAgICAgICAgICAgIHNsaWRlci5zZXRQcm9wcyhzbGlkZXIuaCwgXCJzZXRUb3RhbFwiKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFNNT09USCBIRUlHSFQ6XHJcbiAgICAgICAgICAgIGlmIChzbGlkZXIudmFycy5zbW9vdGhIZWlnaHQpIHsgbWV0aG9kcy5zbW9vdGhIZWlnaHQoKTsgfVxyXG4gICAgICAgICAgICBzbGlkZXIubmV3U2xpZGVzLndpZHRoKHNsaWRlci5jb21wdXRlZFcpO1xyXG4gICAgICAgICAgICBzbGlkZXIuc2V0UHJvcHMoc2xpZGVyLmNvbXB1dGVkVywgXCJzZXRUb3RhbFwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHNtb290aEhlaWdodDogZnVuY3Rpb24oZHVyKSB7XHJcbiAgICAgICAgaWYgKCF2ZXJ0aWNhbCB8fCBmYWRlKSB7XHJcbiAgICAgICAgICB2YXIgJG9iaiA9IChmYWRlKSA/IHNsaWRlciA6IHNsaWRlci52aWV3cG9ydDtcclxuICAgICAgICAgIChkdXIpID8gJG9iai5hbmltYXRlKHtcImhlaWdodFwiOiBzbGlkZXIuc2xpZGVzLmVxKHNsaWRlci5hbmltYXRpbmdUbykuaGVpZ2h0KCl9LCBkdXIpIDogJG9iai5oZWlnaHQoc2xpZGVyLnNsaWRlcy5lcShzbGlkZXIuYW5pbWF0aW5nVG8pLmhlaWdodCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHN5bmM6IGZ1bmN0aW9uKGFjdGlvbikge1xyXG4gICAgICAgIHZhciAkb2JqID0gJChzbGlkZXIudmFycy5zeW5jKS5kYXRhKFwiZmxleHNsaWRlclwiKSxcclxuICAgICAgICAgICAgdGFyZ2V0ID0gc2xpZGVyLmFuaW1hdGluZ1RvO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGFjdGlvbikge1xyXG4gICAgICAgICAgY2FzZSBcImFuaW1hdGVcIjogJG9iai5mbGV4QW5pbWF0ZSh0YXJnZXQsIHNsaWRlci52YXJzLnBhdXNlT25BY3Rpb24sIGZhbHNlLCB0cnVlKTsgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwicGxheVwiOiBpZiAoISRvYmoucGxheWluZyAmJiAhJG9iai5hc05hdikgeyAkb2JqLnBsYXkoKTsgfSBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJwYXVzZVwiOiAkb2JqLnBhdXNlKCk7IGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgdW5pcXVlSUQ6IGZ1bmN0aW9uKCRjbG9uZSkge1xyXG4gICAgICAgIC8vIEFwcGVuZCBfY2xvbmUgdG8gY3VycmVudCBsZXZlbCBhbmQgY2hpbGRyZW4gZWxlbWVudHMgd2l0aCBpZCBhdHRyaWJ1dGVzXHJcbiAgICAgICAgJGNsb25lLmZpbHRlciggJ1tpZF0nICkuYWRkKCRjbG9uZS5maW5kKCAnW2lkXScgKSkuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAkdGhpcy5hdHRyKCAnaWQnLCAkdGhpcy5hdHRyKCAnaWQnICkgKyAnX2Nsb25lJyApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAkY2xvbmU7XHJcbiAgICAgIH0sXHJcbiAgICAgIHBhdXNlSW52aXNpYmxlOiB7XHJcbiAgICAgICAgdmlzUHJvcDogbnVsbCxcclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciB2aXNQcm9wID0gbWV0aG9kcy5wYXVzZUludmlzaWJsZS5nZXRIaWRkZW5Qcm9wKCk7XHJcbiAgICAgICAgICBpZiAodmlzUHJvcCkge1xyXG4gICAgICAgICAgICB2YXIgZXZ0bmFtZSA9IHZpc1Byb3AucmVwbGFjZSgvW0h8aF1pZGRlbi8sJycpICsgJ3Zpc2liaWxpdHljaGFuZ2UnO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2dG5hbWUsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGlmIChtZXRob2RzLnBhdXNlSW52aXNpYmxlLmlzSGlkZGVuKCkpIHtcclxuICAgICAgICAgICAgICAgIGlmKHNsaWRlci5zdGFydFRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNsaWRlci5zdGFydFRpbWVvdXQpOyAvL0lmIGNsb2NrIGlzIHRpY2tpbmcsIHN0b3AgdGltZXIgYW5kIHByZXZlbnQgZnJvbSBzdGFydGluZyB3aGlsZSBpbnZpc2libGVcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IFxyXG4gICAgICAgICAgICAgICAgICBzbGlkZXIucGF1c2UoKTsgLy9PciBqdXN0IHBhdXNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYoc2xpZGVyLnN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgc2xpZGVyLnBsYXkoKTsgLy9Jbml0aWF0ZWQgYmVmb3JlLCBqdXN0IHBsYXlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IFxyXG4gICAgICAgICAgICAgICAgICBpZiAoc2xpZGVyLnZhcnMuaW5pdERlbGF5ID4gMCkgeyBcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHNsaWRlci5wbGF5LCBzbGlkZXIudmFycy5pbml0RGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlci5wbGF5KCk7IC8vRGlkbid0IGluaXQgYmVmb3JlOiBzaW1wbHkgaW5pdCBvciB3YWl0IGZvciBpdFxyXG4gICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpc0hpZGRlbjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgcHJvcCA9IG1ldGhvZHMucGF1c2VJbnZpc2libGUuZ2V0SGlkZGVuUHJvcCgpO1xyXG4gICAgICAgICAgaWYgKCFwcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBkb2N1bWVudFtwcm9wXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldEhpZGRlblByb3A6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHByZWZpeGVzID0gWyd3ZWJraXQnLCdtb3onLCdtcycsJ28nXTtcclxuICAgICAgICAgIC8vIGlmICdoaWRkZW4nIGlzIG5hdGl2ZWx5IHN1cHBvcnRlZCBqdXN0IHJldHVybiBpdFxyXG4gICAgICAgICAgaWYgKCdoaWRkZW4nIGluIGRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnaGlkZGVuJztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIG90aGVyd2lzZSBsb29wIG92ZXIgYWxsIHRoZSBrbm93biBwcmVmaXhlcyB1bnRpbCB3ZSBmaW5kIG9uZVxyXG4gICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgcHJlZml4ZXMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgaWYgKChwcmVmaXhlc1tpXSArICdIaWRkZW4nKSBpbiBkb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZWZpeGVzW2ldICsgJ0hpZGRlbic7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3Mgbm90IHN1cHBvcnRlZFxyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBzZXRUb0NsZWFyV2F0Y2hlZEV2ZW50OiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQod2F0Y2hlZEV2ZW50Q2xlYXJUaW1lcik7XHJcbiAgICAgICAgd2F0Y2hlZEV2ZW50Q2xlYXJUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB3YXRjaGVkRXZlbnQgPSBcIlwiO1xyXG4gICAgICAgIH0sIDMwMDApO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHB1YmxpYyBtZXRob2RzXHJcbiAgICBzbGlkZXIuZmxleEFuaW1hdGUgPSBmdW5jdGlvbih0YXJnZXQsIHBhdXNlLCBvdmVycmlkZSwgd2l0aFN5bmMsIGZyb21OYXYpIHtcclxuICAgICAgaWYgKCFzbGlkZXIudmFycy5hbmltYXRpb25Mb29wICYmIHRhcmdldCAhPT0gc2xpZGVyLmN1cnJlbnRTbGlkZSkge1xyXG4gICAgICAgIHNsaWRlci5kaXJlY3Rpb24gPSAodGFyZ2V0ID4gc2xpZGVyLmN1cnJlbnRTbGlkZSkgPyBcIm5leHRcIiA6IFwicHJldlwiO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoYXNOYXYgJiYgc2xpZGVyLnBhZ2luZ0NvdW50ID09PSAxKSBzbGlkZXIuZGlyZWN0aW9uID0gKHNsaWRlci5jdXJyZW50SXRlbSA8IHRhcmdldCkgPyBcIm5leHRcIiA6IFwicHJldlwiO1xyXG5cclxuICAgICAgaWYgKCFzbGlkZXIuYW5pbWF0aW5nICYmIChzbGlkZXIuY2FuQWR2YW5jZSh0YXJnZXQsIGZyb21OYXYpIHx8IG92ZXJyaWRlKSAmJiBzbGlkZXIuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgIGlmIChhc05hdiAmJiB3aXRoU3luYykge1xyXG4gICAgICAgICAgdmFyIG1hc3RlciA9ICQoc2xpZGVyLnZhcnMuYXNOYXZGb3IpLmRhdGEoJ2ZsZXhzbGlkZXInKTtcclxuICAgICAgICAgIHNsaWRlci5hdEVuZCA9IHRhcmdldCA9PT0gMCB8fCB0YXJnZXQgPT09IHNsaWRlci5jb3VudCAtIDE7XHJcbiAgICAgICAgICBtYXN0ZXIuZmxleEFuaW1hdGUodGFyZ2V0LCB0cnVlLCBmYWxzZSwgdHJ1ZSwgZnJvbU5hdik7XHJcbiAgICAgICAgICBzbGlkZXIuZGlyZWN0aW9uID0gKHNsaWRlci5jdXJyZW50SXRlbSA8IHRhcmdldCkgPyBcIm5leHRcIiA6IFwicHJldlwiO1xyXG4gICAgICAgICAgbWFzdGVyLmRpcmVjdGlvbiA9IHNsaWRlci5kaXJlY3Rpb247XHJcblxyXG4gICAgICAgICAgaWYgKE1hdGguY2VpbCgodGFyZ2V0ICsgMSkvc2xpZGVyLnZpc2libGUpIC0gMSAhPT0gc2xpZGVyLmN1cnJlbnRTbGlkZSAmJiB0YXJnZXQgIT09IDApIHtcclxuICAgICAgICAgICAgc2xpZGVyLmN1cnJlbnRJdGVtID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICBzbGlkZXIuc2xpZGVzLnJlbW92ZUNsYXNzKG5hbWVzcGFjZSArIFwiYWN0aXZlLXNsaWRlXCIpLmVxKHRhcmdldCkuYWRkQ2xhc3MobmFtZXNwYWNlICsgXCJhY3RpdmUtc2xpZGVcIik7XHJcbiAgICAgICAgICAgIHRhcmdldCA9IE1hdGguZmxvb3IodGFyZ2V0L3NsaWRlci52aXNpYmxlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNsaWRlci5jdXJyZW50SXRlbSA9IHRhcmdldDtcclxuICAgICAgICAgICAgc2xpZGVyLnNsaWRlcy5yZW1vdmVDbGFzcyhuYW1lc3BhY2UgKyBcImFjdGl2ZS1zbGlkZVwiKS5lcSh0YXJnZXQpLmFkZENsYXNzKG5hbWVzcGFjZSArIFwiYWN0aXZlLXNsaWRlXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzbGlkZXIuYW5pbWF0aW5nID0gdHJ1ZTtcclxuICAgICAgICBzbGlkZXIuYW5pbWF0aW5nVG8gPSB0YXJnZXQ7XHJcblxyXG4gICAgICAgIC8vIFNMSURFU0hPVzpcclxuICAgICAgICBpZiAocGF1c2UpIHsgc2xpZGVyLnBhdXNlKCk7IH1cclxuXHJcbiAgICAgICAgLy8gQVBJOiBiZWZvcmUoKSBhbmltYXRpb24gQ2FsbGJhY2tcclxuICAgICAgICBzbGlkZXIudmFycy5iZWZvcmUoc2xpZGVyKTtcclxuXHJcbiAgICAgICAgLy8gU1lOQzpcclxuICAgICAgICBpZiAoc2xpZGVyLnN5bmNFeGlzdHMgJiYgIWZyb21OYXYpIHsgbWV0aG9kcy5zeW5jKFwiYW5pbWF0ZVwiKTsgfVxyXG5cclxuICAgICAgICAvLyBDT05UUk9MTkFWXHJcbiAgICAgICAgaWYgKHNsaWRlci52YXJzLmNvbnRyb2xOYXYpIHsgbWV0aG9kcy5jb250cm9sTmF2LmFjdGl2ZSgpOyB9XHJcblxyXG4gICAgICAgIC8vICFDQVJPVVNFTDpcclxuICAgICAgICAvLyBDQU5ESURBVEU6IHNsaWRlIGFjdGl2ZSBjbGFzcyAoZm9yIGFkZC9yZW1vdmUgc2xpZGUpXHJcbiAgICAgICAgaWYgKCFjYXJvdXNlbCkgeyBzbGlkZXIuc2xpZGVzLnJlbW92ZUNsYXNzKG5hbWVzcGFjZSArICdhY3RpdmUtc2xpZGUnKS5lcSh0YXJnZXQpLmFkZENsYXNzKG5hbWVzcGFjZSArICdhY3RpdmUtc2xpZGUnKTsgfVxyXG5cclxuICAgICAgICAvLyBJTkZJTklURSBMT09QOlxyXG4gICAgICAgIC8vIENBTkRJREFURTogYXRFbmRcclxuICAgICAgICBzbGlkZXIuYXRFbmQgPSB0YXJnZXQgPT09IDAgfHwgdGFyZ2V0ID09PSBzbGlkZXIubGFzdDtcclxuXHJcbiAgICAgICAgLy8gRElSRUNUSU9OTkFWOlxyXG4gICAgICAgIGlmIChzbGlkZXIudmFycy5kaXJlY3Rpb25OYXYpIHsgbWV0aG9kcy5kaXJlY3Rpb25OYXYudXBkYXRlKCk7IH1cclxuXHJcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gc2xpZGVyLmxhc3QpIHtcclxuICAgICAgICAgIC8vIEFQSTogZW5kKCkgb2YgY3ljbGUgQ2FsbGJhY2tcclxuICAgICAgICAgIHNsaWRlci52YXJzLmVuZChzbGlkZXIpO1xyXG4gICAgICAgICAgLy8gU0xJREVTSE9XICYmICFJTkZJTklURSBMT09QOlxyXG4gICAgICAgICAgaWYgKCFzbGlkZXIudmFycy5hbmltYXRpb25Mb29wKSB7IHNsaWRlci5wYXVzZSgpOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTTElERTpcclxuICAgICAgICBpZiAoIWZhZGUpIHtcclxuICAgICAgICAgIHZhciBkaW1lbnNpb24gPSAodmVydGljYWwpID8gc2xpZGVyLnNsaWRlcy5maWx0ZXIoJzpmaXJzdCcpLmhlaWdodCgpIDogc2xpZGVyLmNvbXB1dGVkVyxcclxuICAgICAgICAgICAgICBtYXJnaW4sIHNsaWRlU3RyaW5nLCBjYWxjTmV4dDtcclxuXHJcbiAgICAgICAgICAvLyBJTkZJTklURSBMT09QIC8gUkVWRVJTRTpcclxuICAgICAgICAgIGlmIChjYXJvdXNlbCkge1xyXG4gICAgICAgICAgICAvL21hcmdpbiA9IChzbGlkZXIudmFycy5pdGVtV2lkdGggPiBzbGlkZXIudykgPyBzbGlkZXIudmFycy5pdGVtTWFyZ2luICogMiA6IHNsaWRlci52YXJzLml0ZW1NYXJnaW47XHJcbiAgICAgICAgICAgIG1hcmdpbiA9IHNsaWRlci52YXJzLml0ZW1NYXJnaW47XHJcbiAgICAgICAgICAgIGNhbGNOZXh0ID0gKChzbGlkZXIuaXRlbVcgKyBtYXJnaW4pICogc2xpZGVyLm1vdmUpICogc2xpZGVyLmFuaW1hdGluZ1RvO1xyXG4gICAgICAgICAgICBzbGlkZVN0cmluZyA9IChjYWxjTmV4dCA+IHNsaWRlci5saW1pdCAmJiBzbGlkZXIudmlzaWJsZSAhPT0gMSkgPyBzbGlkZXIubGltaXQgOiBjYWxjTmV4dDtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLmN1cnJlbnRTbGlkZSA9PT0gMCAmJiB0YXJnZXQgPT09IHNsaWRlci5jb3VudCAtIDEgJiYgc2xpZGVyLnZhcnMuYW5pbWF0aW9uTG9vcCAmJiBzbGlkZXIuZGlyZWN0aW9uICE9PSBcIm5leHRcIikge1xyXG4gICAgICAgICAgICBzbGlkZVN0cmluZyA9IChyZXZlcnNlKSA/IChzbGlkZXIuY291bnQgKyBzbGlkZXIuY2xvbmVPZmZzZXQpICogZGltZW5zaW9uIDogMDtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLmN1cnJlbnRTbGlkZSA9PT0gc2xpZGVyLmxhc3QgJiYgdGFyZ2V0ID09PSAwICYmIHNsaWRlci52YXJzLmFuaW1hdGlvbkxvb3AgJiYgc2xpZGVyLmRpcmVjdGlvbiAhPT0gXCJwcmV2XCIpIHtcclxuICAgICAgICAgICAgc2xpZGVTdHJpbmcgPSAocmV2ZXJzZSkgPyAwIDogKHNsaWRlci5jb3VudCArIDEpICogZGltZW5zaW9uO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2xpZGVTdHJpbmcgPSAocmV2ZXJzZSkgPyAoKHNsaWRlci5jb3VudCAtIDEpIC0gdGFyZ2V0ICsgc2xpZGVyLmNsb25lT2Zmc2V0KSAqIGRpbWVuc2lvbiA6ICh0YXJnZXQgKyBzbGlkZXIuY2xvbmVPZmZzZXQpICogZGltZW5zaW9uO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2xpZGVyLnNldFByb3BzKHNsaWRlU3RyaW5nLCBcIlwiLCBzbGlkZXIudmFycy5hbmltYXRpb25TcGVlZCk7XHJcbiAgICAgICAgICBpZiAoc2xpZGVyLnRyYW5zaXRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmICghc2xpZGVyLnZhcnMuYW5pbWF0aW9uTG9vcCB8fCAhc2xpZGVyLmF0RW5kKSB7XHJcbiAgICAgICAgICAgICAgc2xpZGVyLmFuaW1hdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIHNsaWRlci5jdXJyZW50U2xpZGUgPSBzbGlkZXIuYW5pbWF0aW5nVG87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFVuYmluZCBwcmV2aW91cyB0cmFuc2l0aW9uRW5kIGV2ZW50cyBhbmQgcmUtYmluZCBuZXcgdHJhbnNpdGlvbkVuZCBldmVudFxyXG4gICAgICAgICAgICBzbGlkZXIuY29udGFpbmVyLnVuYmluZChcIndlYmtpdFRyYW5zaXRpb25FbmQgdHJhbnNpdGlvbmVuZFwiKTtcclxuICAgICAgICAgICAgc2xpZGVyLmNvbnRhaW5lci5iaW5kKFwid2Via2l0VHJhbnNpdGlvbkVuZCB0cmFuc2l0aW9uZW5kXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dChzbGlkZXIuZW5zdXJlQW5pbWF0aW9uRW5kKTtcclxuICAgICAgICAgICAgICBzbGlkZXIud3JhcHVwKGRpbWVuc2lvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gSW5zdXJhbmNlIGZvciB0aGUgZXZlci1zby1maWNrbGUgdHJhbnNpdGlvbkVuZCBldmVudFxyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoc2xpZGVyLmVuc3VyZUFuaW1hdGlvbkVuZCk7XHJcbiAgICAgICAgICAgIHNsaWRlci5lbnN1cmVBbmltYXRpb25FbmQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHNsaWRlci53cmFwdXAoZGltZW5zaW9uKTtcclxuICAgICAgICAgICAgfSwgc2xpZGVyLnZhcnMuYW5pbWF0aW9uU3BlZWQgKyAxMDApO1xyXG5cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNsaWRlci5jb250YWluZXIuYW5pbWF0ZShzbGlkZXIuYXJncywgc2xpZGVyLnZhcnMuYW5pbWF0aW9uU3BlZWQsIHNsaWRlci52YXJzLmVhc2luZywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICBzbGlkZXIud3JhcHVwKGRpbWVuc2lvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7IC8vIEZBREU6XHJcbiAgICAgICAgICBpZiAoIXRvdWNoKSB7XHJcbiAgICAgICAgICAgIC8vc2xpZGVyLnNsaWRlcy5lcShzbGlkZXIuY3VycmVudFNsaWRlKS5mYWRlT3V0KHNsaWRlci52YXJzLmFuaW1hdGlvblNwZWVkLCBzbGlkZXIudmFycy5lYXNpbmcpO1xyXG4gICAgICAgICAgICAvL3NsaWRlci5zbGlkZXMuZXEodGFyZ2V0KS5mYWRlSW4oc2xpZGVyLnZhcnMuYW5pbWF0aW9uU3BlZWQsIHNsaWRlci52YXJzLmVhc2luZywgc2xpZGVyLndyYXB1cCk7XHJcblxyXG4gICAgICAgICAgICBzbGlkZXIuc2xpZGVzLmVxKHNsaWRlci5jdXJyZW50U2xpZGUpLmNzcyh7XCJ6SW5kZXhcIjogMX0pLmFuaW1hdGUoe1wib3BhY2l0eVwiOiAwfSwgc2xpZGVyLnZhcnMuYW5pbWF0aW9uU3BlZWQsIHNsaWRlci52YXJzLmVhc2luZyk7XHJcbiAgICAgICAgICAgIHNsaWRlci5zbGlkZXMuZXEodGFyZ2V0KS5jc3Moe1wiekluZGV4XCI6IDJ9KS5hbmltYXRlKHtcIm9wYWNpdHlcIjogMX0sIHNsaWRlci52YXJzLmFuaW1hdGlvblNwZWVkLCBzbGlkZXIudmFycy5lYXNpbmcsIHNsaWRlci53cmFwdXApO1xyXG5cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNsaWRlci5zbGlkZXMuZXEoc2xpZGVyLmN1cnJlbnRTbGlkZSkuY3NzKHsgXCJvcGFjaXR5XCI6IDAsIFwiekluZGV4XCI6IDEgfSk7XHJcbiAgICAgICAgICAgIHNsaWRlci5zbGlkZXMuZXEodGFyZ2V0KS5jc3MoeyBcIm9wYWNpdHlcIjogMSwgXCJ6SW5kZXhcIjogMiB9KTtcclxuICAgICAgICAgICAgc2xpZGVyLndyYXB1cChkaW1lbnNpb24pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTTU9PVEggSEVJR0hUOlxyXG4gICAgICAgIGlmIChzbGlkZXIudmFycy5zbW9vdGhIZWlnaHQpIHsgbWV0aG9kcy5zbW9vdGhIZWlnaHQoc2xpZGVyLnZhcnMuYW5pbWF0aW9uU3BlZWQpOyB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBzbGlkZXIud3JhcHVwID0gZnVuY3Rpb24oZGltZW5zaW9uKSB7XHJcbiAgICAgIC8vIFNMSURFOlxyXG4gICAgICBpZiAoIWZhZGUgJiYgIWNhcm91c2VsKSB7XHJcbiAgICAgICAgaWYgKHNsaWRlci5jdXJyZW50U2xpZGUgPT09IDAgJiYgc2xpZGVyLmFuaW1hdGluZ1RvID09PSBzbGlkZXIubGFzdCAmJiBzbGlkZXIudmFycy5hbmltYXRpb25Mb29wKSB7XHJcbiAgICAgICAgICBzbGlkZXIuc2V0UHJvcHMoZGltZW5zaW9uLCBcImp1bXBFbmRcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuY3VycmVudFNsaWRlID09PSBzbGlkZXIubGFzdCAmJiBzbGlkZXIuYW5pbWF0aW5nVG8gPT09IDAgJiYgc2xpZGVyLnZhcnMuYW5pbWF0aW9uTG9vcCkge1xyXG4gICAgICAgICAgc2xpZGVyLnNldFByb3BzKGRpbWVuc2lvbiwgXCJqdW1wU3RhcnRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHNsaWRlci5hbmltYXRpbmcgPSBmYWxzZTtcclxuICAgICAgc2xpZGVyLmN1cnJlbnRTbGlkZSA9IHNsaWRlci5hbmltYXRpbmdUbztcclxuICAgICAgLy8gQVBJOiBhZnRlcigpIGFuaW1hdGlvbiBDYWxsYmFja1xyXG4gICAgICBzbGlkZXIudmFycy5hZnRlcihzbGlkZXIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTTElERVNIT1c6XHJcbiAgICBzbGlkZXIuYW5pbWF0ZVNsaWRlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoIXNsaWRlci5hbmltYXRpbmcgJiYgZm9jdXNlZCApIHsgc2xpZGVyLmZsZXhBbmltYXRlKHNsaWRlci5nZXRUYXJnZXQoXCJuZXh0XCIpKTsgfVxyXG4gICAgfTtcclxuICAgIC8vIFNMSURFU0hPVzpcclxuICAgIHNsaWRlci5wYXVzZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBjbGVhckludGVydmFsKHNsaWRlci5hbmltYXRlZFNsaWRlcyk7XHJcbiAgICAgIHNsaWRlci5hbmltYXRlZFNsaWRlcyA9IG51bGw7XHJcbiAgICAgIHNsaWRlci5wbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgIC8vIFBBVVNFUExBWTpcclxuICAgICAgaWYgKHNsaWRlci52YXJzLnBhdXNlUGxheSkgeyBtZXRob2RzLnBhdXNlUGxheS51cGRhdGUoXCJwbGF5XCIpOyB9XHJcbiAgICAgIC8vIFNZTkM6XHJcbiAgICAgIGlmIChzbGlkZXIuc3luY0V4aXN0cykgeyBtZXRob2RzLnN5bmMoXCJwYXVzZVwiKTsgfVxyXG4gICAgfTtcclxuICAgIC8vIFNMSURFU0hPVzpcclxuICAgIHNsaWRlci5wbGF5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmIChzbGlkZXIucGxheWluZykgeyBjbGVhckludGVydmFsKHNsaWRlci5hbmltYXRlZFNsaWRlcyk7IH1cclxuICAgICAgc2xpZGVyLmFuaW1hdGVkU2xpZGVzID0gc2xpZGVyLmFuaW1hdGVkU2xpZGVzIHx8IHNldEludGVydmFsKHNsaWRlci5hbmltYXRlU2xpZGVzLCBzbGlkZXIudmFycy5zbGlkZXNob3dTcGVlZCk7XHJcbiAgICAgIHNsaWRlci5zdGFydGVkID0gc2xpZGVyLnBsYXlpbmcgPSB0cnVlO1xyXG4gICAgICAvLyBQQVVTRVBMQVk6XHJcbiAgICAgIGlmIChzbGlkZXIudmFycy5wYXVzZVBsYXkpIHsgbWV0aG9kcy5wYXVzZVBsYXkudXBkYXRlKFwicGF1c2VcIik7IH1cclxuICAgICAgLy8gU1lOQzpcclxuICAgICAgaWYgKHNsaWRlci5zeW5jRXhpc3RzKSB7IG1ldGhvZHMuc3luYyhcInBsYXlcIik7IH1cclxuICAgIH07XHJcbiAgICAvLyBTVE9QOlxyXG4gICAgc2xpZGVyLnN0b3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHNsaWRlci5wYXVzZSgpO1xyXG4gICAgICBzbGlkZXIuc3RvcHBlZCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgc2xpZGVyLmNhbkFkdmFuY2UgPSBmdW5jdGlvbih0YXJnZXQsIGZyb21OYXYpIHtcclxuICAgICAgLy8gQVNOQVY6XHJcbiAgICAgIHZhciBsYXN0ID0gKGFzTmF2KSA/IHNsaWRlci5wYWdpbmdDb3VudCAtIDEgOiBzbGlkZXIubGFzdDtcclxuICAgICAgcmV0dXJuIChmcm9tTmF2KSA/IHRydWUgOlxyXG4gICAgICAgICAgICAgKGFzTmF2ICYmIHNsaWRlci5jdXJyZW50SXRlbSA9PT0gc2xpZGVyLmNvdW50IC0gMSAmJiB0YXJnZXQgPT09IDAgJiYgc2xpZGVyLmRpcmVjdGlvbiA9PT0gXCJwcmV2XCIpID8gdHJ1ZSA6XHJcbiAgICAgICAgICAgICAoYXNOYXYgJiYgc2xpZGVyLmN1cnJlbnRJdGVtID09PSAwICYmIHRhcmdldCA9PT0gc2xpZGVyLnBhZ2luZ0NvdW50IC0gMSAmJiBzbGlkZXIuZGlyZWN0aW9uICE9PSBcIm5leHRcIikgPyBmYWxzZSA6XHJcbiAgICAgICAgICAgICAodGFyZ2V0ID09PSBzbGlkZXIuY3VycmVudFNsaWRlICYmICFhc05hdikgPyBmYWxzZSA6XHJcbiAgICAgICAgICAgICAoc2xpZGVyLnZhcnMuYW5pbWF0aW9uTG9vcCkgPyB0cnVlIDpcclxuICAgICAgICAgICAgIChzbGlkZXIuYXRFbmQgJiYgc2xpZGVyLmN1cnJlbnRTbGlkZSA9PT0gMCAmJiB0YXJnZXQgPT09IGxhc3QgJiYgc2xpZGVyLmRpcmVjdGlvbiAhPT0gXCJuZXh0XCIpID8gZmFsc2UgOlxyXG4gICAgICAgICAgICAgKHNsaWRlci5hdEVuZCAmJiBzbGlkZXIuY3VycmVudFNsaWRlID09PSBsYXN0ICYmIHRhcmdldCA9PT0gMCAmJiBzbGlkZXIuZGlyZWN0aW9uID09PSBcIm5leHRcIikgPyBmYWxzZSA6XHJcbiAgICAgICAgICAgICB0cnVlO1xyXG4gICAgfTtcclxuICAgIHNsaWRlci5nZXRUYXJnZXQgPSBmdW5jdGlvbihkaXIpIHtcclxuICAgICAgc2xpZGVyLmRpcmVjdGlvbiA9IGRpcjtcclxuICAgICAgaWYgKGRpciA9PT0gXCJuZXh0XCIpIHtcclxuICAgICAgICByZXR1cm4gKHNsaWRlci5jdXJyZW50U2xpZGUgPT09IHNsaWRlci5sYXN0KSA/IDAgOiBzbGlkZXIuY3VycmVudFNsaWRlICsgMTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gKHNsaWRlci5jdXJyZW50U2xpZGUgPT09IDApID8gc2xpZGVyLmxhc3QgOiBzbGlkZXIuY3VycmVudFNsaWRlIC0gMTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTTElERTpcclxuICAgIHNsaWRlci5zZXRQcm9wcyA9IGZ1bmN0aW9uKHBvcywgc3BlY2lhbCwgZHVyKSB7XHJcbiAgICAgIHZhciB0YXJnZXQgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHBvc0NoZWNrID0gKHBvcykgPyBwb3MgOiAoKHNsaWRlci5pdGVtVyArIHNsaWRlci52YXJzLml0ZW1NYXJnaW4pICogc2xpZGVyLm1vdmUpICogc2xpZGVyLmFuaW1hdGluZ1RvLFxyXG4gICAgICAgICAgICBwb3NDYWxjID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGlmIChjYXJvdXNlbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChzcGVjaWFsID09PSBcInNldFRvdWNoXCIpID8gcG9zIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAocmV2ZXJzZSAmJiBzbGlkZXIuYW5pbWF0aW5nVG8gPT09IHNsaWRlci5sYXN0KSA/IDAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgIChyZXZlcnNlKSA/IHNsaWRlci5saW1pdCAtICgoKHNsaWRlci5pdGVtVyArIHNsaWRlci52YXJzLml0ZW1NYXJnaW4pICogc2xpZGVyLm1vdmUpICogc2xpZGVyLmFuaW1hdGluZ1RvKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgKHNsaWRlci5hbmltYXRpbmdUbyA9PT0gc2xpZGVyLmxhc3QpID8gc2xpZGVyLmxpbWl0IDogcG9zQ2hlY2s7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoc3BlY2lhbCkge1xyXG4gICAgICAgICAgICAgICAgICBjYXNlIFwic2V0VG90YWxcIjogcmV0dXJuIChyZXZlcnNlKSA/ICgoc2xpZGVyLmNvdW50IC0gMSkgLSBzbGlkZXIuY3VycmVudFNsaWRlICsgc2xpZGVyLmNsb25lT2Zmc2V0KSAqIHBvcyA6IChzbGlkZXIuY3VycmVudFNsaWRlICsgc2xpZGVyLmNsb25lT2Zmc2V0KSAqIHBvcztcclxuICAgICAgICAgICAgICAgICAgY2FzZSBcInNldFRvdWNoXCI6IHJldHVybiAocmV2ZXJzZSkgPyBwb3MgOiBwb3M7XHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJqdW1wRW5kXCI6IHJldHVybiAocmV2ZXJzZSkgPyBwb3MgOiBzbGlkZXIuY291bnQgKiBwb3M7XHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJqdW1wU3RhcnRcIjogcmV0dXJuIChyZXZlcnNlKSA/IHNsaWRlci5jb3VudCAqIHBvcyA6IHBvcztcclxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIHBvcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0oKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKHBvc0NhbGMgKiAtMSkgKyBcInB4XCI7XHJcbiAgICAgICAgICB9KCkpO1xyXG5cclxuICAgICAgaWYgKHNsaWRlci50cmFuc2l0aW9ucykge1xyXG4gICAgICAgIHRhcmdldCA9ICh2ZXJ0aWNhbCkgPyBcInRyYW5zbGF0ZTNkKDAsXCIgKyB0YXJnZXQgKyBcIiwwKVwiIDogXCJ0cmFuc2xhdGUzZChcIiArIHRhcmdldCArIFwiLDAsMClcIjtcclxuICAgICAgICBkdXIgPSAoZHVyICE9PSB1bmRlZmluZWQpID8gKGR1ci8xMDAwKSArIFwic1wiIDogXCIwc1wiO1xyXG4gICAgICAgIHNsaWRlci5jb250YWluZXIuY3NzKFwiLVwiICsgc2xpZGVyLnBmeCArIFwiLXRyYW5zaXRpb24tZHVyYXRpb25cIiwgZHVyKTtcclxuICAgICAgICAgc2xpZGVyLmNvbnRhaW5lci5jc3MoXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIsIGR1cik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNsaWRlci5hcmdzW3NsaWRlci5wcm9wXSA9IHRhcmdldDtcclxuICAgICAgaWYgKHNsaWRlci50cmFuc2l0aW9ucyB8fCBkdXIgPT09IHVuZGVmaW5lZCkgeyBzbGlkZXIuY29udGFpbmVyLmNzcyhzbGlkZXIuYXJncyk7IH1cclxuXHJcbiAgICAgIHNsaWRlci5jb250YWluZXIuY3NzKCd0cmFuc2Zvcm0nLHRhcmdldCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHNsaWRlci5zZXR1cCA9IGZ1bmN0aW9uKHR5cGUpIHtcclxuICAgICAgLy8gU0xJREU6XHJcbiAgICAgIGlmICghZmFkZSkge1xyXG4gICAgICAgIHZhciBzbGlkZXJPZmZzZXQsIGFycjtcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT09IFwiaW5pdFwiKSB7XHJcbiAgICAgICAgICBzbGlkZXIudmlld3BvcnQgPSAkKCc8ZGl2IGNsYXNzPVwiJyArIG5hbWVzcGFjZSArICd2aWV3cG9ydFwiPjwvZGl2PicpLmNzcyh7XCJvdmVyZmxvd1wiOiBcImhpZGRlblwiLCBcInBvc2l0aW9uXCI6IFwicmVsYXRpdmVcIn0pLmFwcGVuZFRvKHNsaWRlcikuYXBwZW5kKHNsaWRlci5jb250YWluZXIpO1xyXG4gICAgICAgICAgLy8gSU5GSU5JVEUgTE9PUDpcclxuICAgICAgICAgIHNsaWRlci5jbG9uZUNvdW50ID0gMDtcclxuICAgICAgICAgIHNsaWRlci5jbG9uZU9mZnNldCA9IDA7XHJcbiAgICAgICAgICAvLyBSRVZFUlNFOlxyXG4gICAgICAgICAgaWYgKHJldmVyc2UpIHtcclxuICAgICAgICAgICAgYXJyID0gJC5tYWtlQXJyYXkoc2xpZGVyLnNsaWRlcykucmV2ZXJzZSgpO1xyXG4gICAgICAgICAgICBzbGlkZXIuc2xpZGVzID0gJChhcnIpO1xyXG4gICAgICAgICAgICBzbGlkZXIuY29udGFpbmVyLmVtcHR5KCkuYXBwZW5kKHNsaWRlci5zbGlkZXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJTkZJTklURSBMT09QICYmICFDQVJPVVNFTDpcclxuICAgICAgICBpZiAoc2xpZGVyLnZhcnMuYW5pbWF0aW9uTG9vcCAmJiAhY2Fyb3VzZWwpIHtcclxuICAgICAgICAgIHNsaWRlci5jbG9uZUNvdW50ID0gMjtcclxuICAgICAgICAgIHNsaWRlci5jbG9uZU9mZnNldCA9IDE7XHJcbiAgICAgICAgICAvLyBjbGVhciBvdXQgb2xkIGNsb25lc1xyXG4gICAgICAgICAgaWYgKHR5cGUgIT09IFwiaW5pdFwiKSB7IHNsaWRlci5jb250YWluZXIuZmluZCgnLmNsb25lJykucmVtb3ZlKCk7IH1cclxuICAgICAgICAgIHNsaWRlci5jb250YWluZXIuYXBwZW5kKG1ldGhvZHMudW5pcXVlSUQoc2xpZGVyLnNsaWRlcy5maXJzdCgpLmNsb25lKCkuYWRkQ2xhc3MoJ2Nsb25lJykpLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAucHJlcGVuZChtZXRob2RzLnVuaXF1ZUlEKHNsaWRlci5zbGlkZXMubGFzdCgpLmNsb25lKCkuYWRkQ2xhc3MoJ2Nsb25lJykpLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNsaWRlci5uZXdTbGlkZXMgPSAkKHNsaWRlci52YXJzLnNlbGVjdG9yLCBzbGlkZXIpO1xyXG5cclxuICAgICAgICBzbGlkZXJPZmZzZXQgPSAocmV2ZXJzZSkgPyBzbGlkZXIuY291bnQgLSAxIC0gc2xpZGVyLmN1cnJlbnRTbGlkZSArIHNsaWRlci5jbG9uZU9mZnNldCA6IHNsaWRlci5jdXJyZW50U2xpZGUgKyBzbGlkZXIuY2xvbmVPZmZzZXQ7XHJcbiAgICAgICAgLy8gVkVSVElDQUw6XHJcbiAgICAgICAgaWYgKHZlcnRpY2FsICYmICFjYXJvdXNlbCkge1xyXG4gICAgICAgICAgc2xpZGVyLmNvbnRhaW5lci5oZWlnaHQoKHNsaWRlci5jb3VudCArIHNsaWRlci5jbG9uZUNvdW50KSAqIDIwMCArIFwiJVwiKS5jc3MoXCJwb3NpdGlvblwiLCBcImFic29sdXRlXCIpLndpZHRoKFwiMTAwJVwiKTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc2xpZGVyLm5ld1NsaWRlcy5jc3Moe1wiZGlzcGxheVwiOiBcImJsb2NrXCJ9KTtcclxuICAgICAgICAgICAgc2xpZGVyLmRvTWF0aCgpO1xyXG4gICAgICAgICAgICBzbGlkZXIudmlld3BvcnQuaGVpZ2h0KHNsaWRlci5oKTtcclxuICAgICAgICAgICAgc2xpZGVyLnNldFByb3BzKHNsaWRlck9mZnNldCAqIHNsaWRlci5oLCBcImluaXRcIik7XHJcbiAgICAgICAgICB9LCAodHlwZSA9PT0gXCJpbml0XCIpID8gMTAwIDogMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNsaWRlci5jb250YWluZXIud2lkdGgoKHNsaWRlci5jb3VudCArIHNsaWRlci5jbG9uZUNvdW50KSAqIDIwMCArIFwiJVwiKTtcclxuICAgICAgICAgIHNsaWRlci5zZXRQcm9wcyhzbGlkZXJPZmZzZXQgKiBzbGlkZXIuY29tcHV0ZWRXLCBcImluaXRcIik7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNsaWRlci5kb01hdGgoKTtcclxuICAgICAgICAgICAgc2xpZGVyLm5ld1NsaWRlcy5jc3Moe1wid2lkdGhcIjogc2xpZGVyLmNvbXB1dGVkVywgXCJmbG9hdFwiOiBcImxlZnRcIiwgXCJkaXNwbGF5XCI6IFwiYmxvY2tcIn0pO1xyXG4gICAgICAgICAgICAvLyBTTU9PVEggSEVJR0hUOlxyXG4gICAgICAgICAgICBpZiAoc2xpZGVyLnZhcnMuc21vb3RoSGVpZ2h0KSB7IG1ldGhvZHMuc21vb3RoSGVpZ2h0KCk7IH1cclxuICAgICAgICAgIH0sICh0eXBlID09PSBcImluaXRcIikgPyAxMDAgOiAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7IC8vIEZBREU6XHJcbiAgICAgICAgc2xpZGVyLnNsaWRlcy5jc3Moe1wid2lkdGhcIjogXCIxMDAlXCIsIFwiZmxvYXRcIjogXCJsZWZ0XCIsIFwibWFyZ2luUmlnaHRcIjogXCItMTAwJVwiLCBcInBvc2l0aW9uXCI6IFwicmVsYXRpdmVcIn0pO1xyXG4gICAgICAgIGlmICh0eXBlID09PSBcImluaXRcIikge1xyXG4gICAgICAgICAgaWYgKCF0b3VjaCkge1xyXG4gICAgICAgICAgICAvL3NsaWRlci5zbGlkZXMuZXEoc2xpZGVyLmN1cnJlbnRTbGlkZSkuZmFkZUluKHNsaWRlci52YXJzLmFuaW1hdGlvblNwZWVkLCBzbGlkZXIudmFycy5lYXNpbmcpO1xyXG4gICAgICAgICAgICBpZiAoc2xpZGVyLnZhcnMuZmFkZUZpcnN0U2xpZGUgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICBzbGlkZXIuc2xpZGVzLmNzcyh7IFwib3BhY2l0eVwiOiAwLCBcImRpc3BsYXlcIjogXCJibG9ja1wiLCBcInpJbmRleFwiOiAxIH0pLmVxKHNsaWRlci5jdXJyZW50U2xpZGUpLmNzcyh7XCJ6SW5kZXhcIjogMn0pLmNzcyh7XCJvcGFjaXR5XCI6IDF9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzbGlkZXIuc2xpZGVzLmNzcyh7IFwib3BhY2l0eVwiOiAwLCBcImRpc3BsYXlcIjogXCJibG9ja1wiLCBcInpJbmRleFwiOiAxIH0pLmVxKHNsaWRlci5jdXJyZW50U2xpZGUpLmNzcyh7XCJ6SW5kZXhcIjogMn0pLmFuaW1hdGUoe1wib3BhY2l0eVwiOiAxfSxzbGlkZXIudmFycy5hbmltYXRpb25TcGVlZCxzbGlkZXIudmFycy5lYXNpbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzbGlkZXIuc2xpZGVzLmNzcyh7IFwib3BhY2l0eVwiOiAwLCBcImRpc3BsYXlcIjogXCJibG9ja1wiLCBcIndlYmtpdFRyYW5zaXRpb25cIjogXCJvcGFjaXR5IFwiICsgc2xpZGVyLnZhcnMuYW5pbWF0aW9uU3BlZWQgLyAxMDAwICsgXCJzIGVhc2VcIiwgXCJ6SW5kZXhcIjogMSB9KS5lcShzbGlkZXIuY3VycmVudFNsaWRlKS5jc3MoeyBcIm9wYWNpdHlcIjogMSwgXCJ6SW5kZXhcIjogMn0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTTU9PVEggSEVJR0hUOlxyXG4gICAgICAgIGlmIChzbGlkZXIudmFycy5zbW9vdGhIZWlnaHQpIHsgbWV0aG9kcy5zbW9vdGhIZWlnaHQoKTsgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vICFDQVJPVVNFTDpcclxuICAgICAgLy8gQ0FORElEQVRFOiBhY3RpdmUgc2xpZGVcclxuICAgICAgaWYgKCFjYXJvdXNlbCkgeyBzbGlkZXIuc2xpZGVzLnJlbW92ZUNsYXNzKG5hbWVzcGFjZSArIFwiYWN0aXZlLXNsaWRlXCIpLmVxKHNsaWRlci5jdXJyZW50U2xpZGUpLmFkZENsYXNzKG5hbWVzcGFjZSArIFwiYWN0aXZlLXNsaWRlXCIpOyB9XHJcblxyXG4gICAgICAvL0ZsZXhTbGlkZXI6IGluaXQoKSBDYWxsYmFja1xyXG4gICAgICBzbGlkZXIudmFycy5pbml0KHNsaWRlcik7XHJcbiAgICB9O1xyXG5cclxuICAgIHNsaWRlci5kb01hdGggPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHNsaWRlID0gc2xpZGVyLnNsaWRlcy5maXJzdCgpLFxyXG4gICAgICAgICAgc2xpZGVNYXJnaW4gPSBzbGlkZXIudmFycy5pdGVtTWFyZ2luLFxyXG4gICAgICAgICAgbWluSXRlbXMgPSBzbGlkZXIudmFycy5taW5JdGVtcyxcclxuICAgICAgICAgIG1heEl0ZW1zID0gc2xpZGVyLnZhcnMubWF4SXRlbXM7XHJcblxyXG4gICAgICBzbGlkZXIudyA9IChzbGlkZXIudmlld3BvcnQ9PT11bmRlZmluZWQpID8gc2xpZGVyLndpZHRoKCkgOiBzbGlkZXIudmlld3BvcnQud2lkdGgoKTtcclxuICAgICAgc2xpZGVyLmggPSBzbGlkZS5oZWlnaHQoKTtcclxuICAgICAgc2xpZGVyLmJveFBhZGRpbmcgPSBzbGlkZS5vdXRlcldpZHRoKCkgLSBzbGlkZS53aWR0aCgpO1xyXG5cclxuICAgICAgLy8gQ0FST1VTRUw6XHJcbiAgICAgIGlmIChjYXJvdXNlbCkge1xyXG4gICAgICAgIHNsaWRlci5pdGVtVCA9IHNsaWRlci52YXJzLml0ZW1XaWR0aCArIHNsaWRlTWFyZ2luO1xyXG4gICAgICAgIHNsaWRlci5taW5XID0gKG1pbkl0ZW1zKSA/IG1pbkl0ZW1zICogc2xpZGVyLml0ZW1UIDogc2xpZGVyLnc7XHJcbiAgICAgICAgc2xpZGVyLm1heFcgPSAobWF4SXRlbXMpID8gKG1heEl0ZW1zICogc2xpZGVyLml0ZW1UKSAtIHNsaWRlTWFyZ2luIDogc2xpZGVyLnc7XHJcbiAgICAgICAgc2xpZGVyLml0ZW1XID0gKHNsaWRlci5taW5XID4gc2xpZGVyLncpID8gKHNsaWRlci53IC0gKHNsaWRlTWFyZ2luICogKG1pbkl0ZW1zIC0gMSkpKS9taW5JdGVtcyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgKHNsaWRlci5tYXhXIDwgc2xpZGVyLncpID8gKHNsaWRlci53IC0gKHNsaWRlTWFyZ2luICogKG1heEl0ZW1zIC0gMSkpKS9tYXhJdGVtcyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgKHNsaWRlci52YXJzLml0ZW1XaWR0aCA+IHNsaWRlci53KSA/IHNsaWRlci53IDogc2xpZGVyLnZhcnMuaXRlbVdpZHRoO1xyXG5cclxuICAgICAgICBzbGlkZXIudmlzaWJsZSA9IE1hdGguZmxvb3Ioc2xpZGVyLncvKHNsaWRlci5pdGVtVykpO1xyXG4gICAgICAgIHNsaWRlci5tb3ZlID0gKHNsaWRlci52YXJzLm1vdmUgPiAwICYmIHNsaWRlci52YXJzLm1vdmUgPCBzbGlkZXIudmlzaWJsZSApID8gc2xpZGVyLnZhcnMubW92ZSA6IHNsaWRlci52aXNpYmxlO1xyXG4gICAgICAgIHNsaWRlci5wYWdpbmdDb3VudCA9IE1hdGguY2VpbCgoKHNsaWRlci5jb3VudCAtIHNsaWRlci52aXNpYmxlKS9zbGlkZXIubW92ZSkgKyAxKTtcclxuICAgICAgICBzbGlkZXIubGFzdCA9ICBzbGlkZXIucGFnaW5nQ291bnQgLSAxO1xyXG4gICAgICAgIHNsaWRlci5saW1pdCA9IChzbGlkZXIucGFnaW5nQ291bnQgPT09IDEpID8gMCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgKHNsaWRlci52YXJzLml0ZW1XaWR0aCA+IHNsaWRlci53KSA/IChzbGlkZXIuaXRlbVcgKiAoc2xpZGVyLmNvdW50IC0gMSkpICsgKHNsaWRlTWFyZ2luICogKHNsaWRlci5jb3VudCAtIDEpKSA6ICgoc2xpZGVyLml0ZW1XICsgc2xpZGVNYXJnaW4pICogc2xpZGVyLmNvdW50KSAtIHNsaWRlci53IC0gc2xpZGVNYXJnaW47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2xpZGVyLml0ZW1XID0gc2xpZGVyLnc7XHJcbiAgICAgICAgc2xpZGVyLnBhZ2luZ0NvdW50ID0gc2xpZGVyLmNvdW50O1xyXG4gICAgICAgIHNsaWRlci5sYXN0ID0gc2xpZGVyLmNvdW50IC0gMTtcclxuICAgICAgfVxyXG4gICAgICBzbGlkZXIuY29tcHV0ZWRXID0gc2xpZGVyLml0ZW1XIC0gc2xpZGVyLmJveFBhZGRpbmc7XHJcbiAgICB9O1xyXG5cclxuICAgIHNsaWRlci51cGRhdGUgPSBmdW5jdGlvbihwb3MsIGFjdGlvbikge1xyXG4gICAgICBzbGlkZXIuZG9NYXRoKCk7XHJcblxyXG4gICAgICAvLyB1cGRhdGUgY3VycmVudFNsaWRlIGFuZCBzbGlkZXIuYW5pbWF0aW5nVG8gaWYgbmVjZXNzYXJ5XHJcbiAgICAgIGlmICghY2Fyb3VzZWwpIHtcclxuICAgICAgICBpZiAocG9zIDwgc2xpZGVyLmN1cnJlbnRTbGlkZSkge1xyXG4gICAgICAgICAgc2xpZGVyLmN1cnJlbnRTbGlkZSArPSAxO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocG9zIDw9IHNsaWRlci5jdXJyZW50U2xpZGUgJiYgcG9zICE9PSAwKSB7XHJcbiAgICAgICAgICBzbGlkZXIuY3VycmVudFNsaWRlIC09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNsaWRlci5hbmltYXRpbmdUbyA9IHNsaWRlci5jdXJyZW50U2xpZGU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHVwZGF0ZSBjb250cm9sTmF2XHJcbiAgICAgIGlmIChzbGlkZXIudmFycy5jb250cm9sTmF2ICYmICFzbGlkZXIubWFudWFsQ29udHJvbHMpIHtcclxuICAgICAgICBpZiAoKGFjdGlvbiA9PT0gXCJhZGRcIiAmJiAhY2Fyb3VzZWwpIHx8IHNsaWRlci5wYWdpbmdDb3VudCA+IHNsaWRlci5jb250cm9sTmF2Lmxlbmd0aCkge1xyXG4gICAgICAgICAgbWV0aG9kcy5jb250cm9sTmF2LnVwZGF0ZShcImFkZFwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKChhY3Rpb24gPT09IFwicmVtb3ZlXCIgJiYgIWNhcm91c2VsKSB8fCBzbGlkZXIucGFnaW5nQ291bnQgPCBzbGlkZXIuY29udHJvbE5hdi5sZW5ndGgpIHtcclxuICAgICAgICAgIGlmIChjYXJvdXNlbCAmJiBzbGlkZXIuY3VycmVudFNsaWRlID4gc2xpZGVyLmxhc3QpIHtcclxuICAgICAgICAgICAgc2xpZGVyLmN1cnJlbnRTbGlkZSAtPSAxO1xyXG4gICAgICAgICAgICBzbGlkZXIuYW5pbWF0aW5nVG8gLT0gMTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG1ldGhvZHMuY29udHJvbE5hdi51cGRhdGUoXCJyZW1vdmVcIiwgc2xpZGVyLmxhc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyB1cGRhdGUgZGlyZWN0aW9uTmF2XHJcbiAgICAgIGlmIChzbGlkZXIudmFycy5kaXJlY3Rpb25OYXYpIHsgbWV0aG9kcy5kaXJlY3Rpb25OYXYudXBkYXRlKCk7IH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHNsaWRlci5hZGRTbGlkZSA9IGZ1bmN0aW9uKG9iaiwgcG9zKSB7XHJcbiAgICAgIHZhciAkb2JqID0gJChvYmopO1xyXG5cclxuICAgICAgc2xpZGVyLmNvdW50ICs9IDE7XHJcbiAgICAgIHNsaWRlci5sYXN0ID0gc2xpZGVyLmNvdW50IC0gMTtcclxuXHJcbiAgICAgIC8vIGFwcGVuZCBuZXcgc2xpZGVcclxuICAgICAgaWYgKHZlcnRpY2FsICYmIHJldmVyc2UpIHtcclxuICAgICAgICAocG9zICE9PSB1bmRlZmluZWQpID8gc2xpZGVyLnNsaWRlcy5lcShzbGlkZXIuY291bnQgLSBwb3MpLmFmdGVyKCRvYmopIDogc2xpZGVyLmNvbnRhaW5lci5wcmVwZW5kKCRvYmopO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIChwb3MgIT09IHVuZGVmaW5lZCkgPyBzbGlkZXIuc2xpZGVzLmVxKHBvcykuYmVmb3JlKCRvYmopIDogc2xpZGVyLmNvbnRhaW5lci5hcHBlbmQoJG9iaik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHVwZGF0ZSBjdXJyZW50U2xpZGUsIGFuaW1hdGluZ1RvLCBjb250cm9sTmF2LCBhbmQgZGlyZWN0aW9uTmF2XHJcbiAgICAgIHNsaWRlci51cGRhdGUocG9zLCBcImFkZFwiKTtcclxuXHJcbiAgICAgIC8vIHVwZGF0ZSBzbGlkZXIuc2xpZGVzXHJcbiAgICAgIHNsaWRlci5zbGlkZXMgPSAkKHNsaWRlci52YXJzLnNlbGVjdG9yICsgJzpub3QoLmNsb25lKScsIHNsaWRlcik7XHJcbiAgICAgIC8vIHJlLXNldHVwIHRoZSBzbGlkZXIgdG8gYWNjb21kYXRlIG5ldyBzbGlkZVxyXG4gICAgICBzbGlkZXIuc2V0dXAoKTtcclxuXHJcbiAgICAgIC8vRmxleFNsaWRlcjogYWRkZWQoKSBDYWxsYmFja1xyXG4gICAgICBzbGlkZXIudmFycy5hZGRlZChzbGlkZXIpO1xyXG4gICAgfTtcclxuICAgIHNsaWRlci5yZW1vdmVTbGlkZSA9IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICB2YXIgcG9zID0gKGlzTmFOKG9iaikpID8gc2xpZGVyLnNsaWRlcy5pbmRleCgkKG9iaikpIDogb2JqO1xyXG5cclxuICAgICAgLy8gdXBkYXRlIGNvdW50XHJcbiAgICAgIHNsaWRlci5jb3VudCAtPSAxO1xyXG4gICAgICBzbGlkZXIubGFzdCA9IHNsaWRlci5jb3VudCAtIDE7XHJcblxyXG4gICAgICAvLyByZW1vdmUgc2xpZGVcclxuICAgICAgaWYgKGlzTmFOKG9iaikpIHtcclxuICAgICAgICAkKG9iaiwgc2xpZGVyLnNsaWRlcykucmVtb3ZlKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgKHZlcnRpY2FsICYmIHJldmVyc2UpID8gc2xpZGVyLnNsaWRlcy5lcShzbGlkZXIubGFzdCkucmVtb3ZlKCkgOiBzbGlkZXIuc2xpZGVzLmVxKG9iaikucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHVwZGF0ZSBjdXJyZW50U2xpZGUsIGFuaW1hdGluZ1RvLCBjb250cm9sTmF2LCBhbmQgZGlyZWN0aW9uTmF2XHJcbiAgICAgIHNsaWRlci5kb01hdGgoKTtcclxuICAgICAgc2xpZGVyLnVwZGF0ZShwb3MsIFwicmVtb3ZlXCIpO1xyXG5cclxuICAgICAgLy8gdXBkYXRlIHNsaWRlci5zbGlkZXNcclxuICAgICAgc2xpZGVyLnNsaWRlcyA9ICQoc2xpZGVyLnZhcnMuc2VsZWN0b3IgKyAnOm5vdCguY2xvbmUpJywgc2xpZGVyKTtcclxuICAgICAgLy8gcmUtc2V0dXAgdGhlIHNsaWRlciB0byBhY2NvbWRhdGUgbmV3IHNsaWRlXHJcbiAgICAgIHNsaWRlci5zZXR1cCgpO1xyXG5cclxuICAgICAgLy8gRmxleFNsaWRlcjogcmVtb3ZlZCgpIENhbGxiYWNrXHJcbiAgICAgIHNsaWRlci52YXJzLnJlbW92ZWQoc2xpZGVyKTtcclxuICAgIH07XHJcblxyXG4gICAgLy9GbGV4U2xpZGVyOiBJbml0aWFsaXplXHJcbiAgICBtZXRob2RzLmluaXQoKTtcclxuICB9O1xyXG5cclxuICAvLyBFbnN1cmUgdGhlIHNsaWRlciBpc24ndCBmb2N1c3NlZCBpZiB0aGUgd2luZG93IGxvc2VzIGZvY3VzLlxyXG4gICQoIHdpbmRvdyApLmJsdXIoIGZ1bmN0aW9uICggZSApIHtcclxuICAgIGZvY3VzZWQgPSBmYWxzZTtcclxuICB9KS5mb2N1cyggZnVuY3Rpb24gKCBlICkge1xyXG4gICAgZm9jdXNlZCA9IHRydWU7XHJcbiAgfSk7XHJcblxyXG4gIC8vRmxleFNsaWRlcjogRGVmYXVsdCBTZXR0aW5nc1xyXG4gICQuZmxleHNsaWRlci5kZWZhdWx0cyA9IHtcclxuICAgIG5hbWVzcGFjZTogXCJmbGV4LVwiLCAgICAgICAgICAgICAvL3tORVd9IFN0cmluZzogUHJlZml4IHN0cmluZyBhdHRhY2hlZCB0byB0aGUgY2xhc3Mgb2YgZXZlcnkgZWxlbWVudCBnZW5lcmF0ZWQgYnkgdGhlIHBsdWdpblxyXG4gICAgc2VsZWN0b3I6IFwiLnNsaWRlcyA+IGxpXCIsICAgICAgIC8ve05FV30gU2VsZWN0b3I6IE11c3QgbWF0Y2ggYSBzaW1wbGUgcGF0dGVybi4gJ3tjb250YWluZXJ9ID4ge3NsaWRlfScgLS0gSWdub3JlIHBhdHRlcm4gYXQgeW91ciBvd24gcGVyaWxcclxuICAgIGFuaW1hdGlvbjogXCJmYWRlXCIsICAgICAgICAgICAgICAvL1N0cmluZzogU2VsZWN0IHlvdXIgYW5pbWF0aW9uIHR5cGUsIFwiZmFkZVwiIG9yIFwic2xpZGVcIlxyXG4gICAgZWFzaW5nOiBcInN3aW5nXCIsICAgICAgICAgICAgICAgIC8ve05FV30gU3RyaW5nOiBEZXRlcm1pbmVzIHRoZSBlYXNpbmcgbWV0aG9kIHVzZWQgaW4galF1ZXJ5IHRyYW5zaXRpb25zLiBqUXVlcnkgZWFzaW5nIHBsdWdpbiBpcyBzdXBwb3J0ZWQhXHJcbiAgICBkaXJlY3Rpb246IFwiaG9yaXpvbnRhbFwiLCAgICAgICAgLy9TdHJpbmc6IFNlbGVjdCB0aGUgc2xpZGluZyBkaXJlY3Rpb24sIFwiaG9yaXpvbnRhbFwiIG9yIFwidmVydGljYWxcIlxyXG4gICAgcmV2ZXJzZTogZmFsc2UsICAgICAgICAgICAgICAgICAvL3tORVd9IEJvb2xlYW46IFJldmVyc2UgdGhlIGFuaW1hdGlvbiBkaXJlY3Rpb25cclxuICAgIGFuaW1hdGlvbkxvb3A6IHRydWUsICAgICAgICAgICAgLy9Cb29sZWFuOiBTaG91bGQgdGhlIGFuaW1hdGlvbiBsb29wPyBJZiBmYWxzZSwgZGlyZWN0aW9uTmF2IHdpbGwgcmVjZWl2ZWQgXCJkaXNhYmxlXCIgY2xhc3NlcyBhdCBlaXRoZXIgZW5kXHJcbiAgICBzbW9vdGhIZWlnaHQ6IGZhbHNlLCAgICAgICAgICAgIC8ve05FV30gQm9vbGVhbjogQWxsb3cgaGVpZ2h0IG9mIHRoZSBzbGlkZXIgdG8gYW5pbWF0ZSBzbW9vdGhseSBpbiBob3Jpem9udGFsIG1vZGVcclxuICAgIHN0YXJ0QXQ6IDAsICAgICAgICAgICAgICAgICAgICAgLy9JbnRlZ2VyOiBUaGUgc2xpZGUgdGhhdCB0aGUgc2xpZGVyIHNob3VsZCBzdGFydCBvbi4gQXJyYXkgbm90YXRpb24gKDAgPSBmaXJzdCBzbGlkZSlcclxuICAgIHNsaWRlc2hvdzogdHJ1ZSwgICAgICAgICAgICAgICAgLy9Cb29sZWFuOiBBbmltYXRlIHNsaWRlciBhdXRvbWF0aWNhbGx5XHJcbiAgICBzbGlkZXNob3dTcGVlZDogNzAwMCwgICAgICAgICAgIC8vSW50ZWdlcjogU2V0IHRoZSBzcGVlZCBvZiB0aGUgc2xpZGVzaG93IGN5Y2xpbmcsIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgYW5pbWF0aW9uU3BlZWQ6IDYwMCwgICAgICAgICAgICAvL0ludGVnZXI6IFNldCB0aGUgc3BlZWQgb2YgYW5pbWF0aW9ucywgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICBpbml0RGVsYXk6IDAsICAgICAgICAgICAgICAgICAgIC8ve05FV30gSW50ZWdlcjogU2V0IGFuIGluaXRpYWxpemF0aW9uIGRlbGF5LCBpbiBtaWxsaXNlY29uZHNcclxuICAgIHJhbmRvbWl6ZTogZmFsc2UsICAgICAgICAgICAgICAgLy9Cb29sZWFuOiBSYW5kb21pemUgc2xpZGUgb3JkZXJcclxuICAgIGZhZGVGaXJzdFNsaWRlOiB0cnVlLCAgICAgICAgICAgLy9Cb29sZWFuOiBGYWRlIGluIHRoZSBmaXJzdCBzbGlkZSB3aGVuIGFuaW1hdGlvbiB0eXBlIGlzIFwiZmFkZVwiXHJcbiAgICB0aHVtYkNhcHRpb25zOiBmYWxzZSwgICAgICAgICAgIC8vQm9vbGVhbjogV2hldGhlciBvciBub3QgdG8gcHV0IGNhcHRpb25zIG9uIHRodW1ibmFpbHMgd2hlbiB1c2luZyB0aGUgXCJ0aHVtYm5haWxzXCIgY29udHJvbE5hdi5cclxuXHJcbiAgICAvLyBVc2FiaWxpdHkgZmVhdHVyZXNcclxuICAgIHBhdXNlT25BY3Rpb246IHRydWUsICAgICAgICAgICAgLy9Cb29sZWFuOiBQYXVzZSB0aGUgc2xpZGVzaG93IHdoZW4gaW50ZXJhY3Rpbmcgd2l0aCBjb250cm9sIGVsZW1lbnRzLCBoaWdobHkgcmVjb21tZW5kZWQuXHJcbiAgICBwYXVzZU9uSG92ZXI6IGZhbHNlLCAgICAgICAgICAgIC8vQm9vbGVhbjogUGF1c2UgdGhlIHNsaWRlc2hvdyB3aGVuIGhvdmVyaW5nIG92ZXIgc2xpZGVyLCB0aGVuIHJlc3VtZSB3aGVuIG5vIGxvbmdlciBob3ZlcmluZ1xyXG4gICAgcGF1c2VJbnZpc2libGU6IHRydWUsICAgXHRcdC8ve05FV30gQm9vbGVhbjogUGF1c2UgdGhlIHNsaWRlc2hvdyB3aGVuIHRhYiBpcyBpbnZpc2libGUsIHJlc3VtZSB3aGVuIHZpc2libGUuIFByb3ZpZGVzIGJldHRlciBVWCwgbG93ZXIgQ1BVIHVzYWdlLlxyXG4gICAgdXNlQ1NTOiB0cnVlLCAgICAgICAgICAgICAgICAgICAvL3tORVd9IEJvb2xlYW46IFNsaWRlciB3aWxsIHVzZSBDU1MzIHRyYW5zaXRpb25zIGlmIGF2YWlsYWJsZVxyXG4gICAgdG91Y2g6IHRydWUsICAgICAgICAgICAgICAgICAgICAvL3tORVd9IEJvb2xlYW46IEFsbG93IHRvdWNoIHN3aXBlIG5hdmlnYXRpb24gb2YgdGhlIHNsaWRlciBvbiB0b3VjaC1lbmFibGVkIGRldmljZXNcclxuICAgIHZpZGVvOiBmYWxzZSwgICAgICAgICAgICAgICAgICAgLy97TkVXfSBCb29sZWFuOiBJZiB1c2luZyB2aWRlbyBpbiB0aGUgc2xpZGVyLCB3aWxsIHByZXZlbnQgQ1NTMyAzRCBUcmFuc2Zvcm1zIHRvIGF2b2lkIGdyYXBoaWNhbCBnbGl0Y2hlc1xyXG5cclxuICAgIC8vIFByaW1hcnkgQ29udHJvbHNcclxuICAgIGNvbnRyb2xOYXY6IHRydWUsICAgICAgICAgICAgICAgLy9Cb29sZWFuOiBDcmVhdGUgbmF2aWdhdGlvbiBmb3IgcGFnaW5nIGNvbnRyb2wgb2YgZWFjaCBzbGlkZT8gTm90ZTogTGVhdmUgdHJ1ZSBmb3IgbWFudWFsQ29udHJvbHMgdXNhZ2VcclxuICAgIGRpcmVjdGlvbk5hdjogdHJ1ZSwgICAgICAgICAgICAgLy9Cb29sZWFuOiBDcmVhdGUgbmF2aWdhdGlvbiBmb3IgcHJldmlvdXMvbmV4dCBuYXZpZ2F0aW9uPyAodHJ1ZS9mYWxzZSlcclxuICAgIHByZXZUZXh0OiBcIlByZXZpb3VzXCIsICAgICAgICAgICAvL1N0cmluZzogU2V0IHRoZSB0ZXh0IGZvciB0aGUgXCJwcmV2aW91c1wiIGRpcmVjdGlvbk5hdiBpdGVtXHJcbiAgICBuZXh0VGV4dDogXCJOZXh0XCIsICAgICAgICAgICAgICAgLy9TdHJpbmc6IFNldCB0aGUgdGV4dCBmb3IgdGhlIFwibmV4dFwiIGRpcmVjdGlvbk5hdiBpdGVtXHJcblxyXG4gICAgLy8gU2Vjb25kYXJ5IE5hdmlnYXRpb25cclxuICAgIGtleWJvYXJkOiB0cnVlLCAgICAgICAgICAgICAgICAgLy9Cb29sZWFuOiBBbGxvdyBzbGlkZXIgbmF2aWdhdGluZyB2aWEga2V5Ym9hcmQgbGVmdC9yaWdodCBrZXlzXHJcbiAgICBtdWx0aXBsZUtleWJvYXJkOiBmYWxzZSwgICAgICAgIC8ve05FV30gQm9vbGVhbjogQWxsb3cga2V5Ym9hcmQgbmF2aWdhdGlvbiB0byBhZmZlY3QgbXVsdGlwbGUgc2xpZGVycy4gRGVmYXVsdCBiZWhhdmlvciBjdXRzIG91dCBrZXlib2FyZCBuYXZpZ2F0aW9uIHdpdGggbW9yZSB0aGFuIG9uZSBzbGlkZXIgcHJlc2VudC5cclxuICAgIG1vdXNld2hlZWw6IGZhbHNlLCAgICAgICAgICAgICAgLy97VVBEQVRFRH0gQm9vbGVhbjogUmVxdWlyZXMganF1ZXJ5Lm1vdXNld2hlZWwuanMgKGh0dHBzOi8vZ2l0aHViLmNvbS9icmFuZG9uYWFyb24vanF1ZXJ5LW1vdXNld2hlZWwpIC0gQWxsb3dzIHNsaWRlciBuYXZpZ2F0aW5nIHZpYSBtb3VzZXdoZWVsXHJcbiAgICBwYXVzZVBsYXk6IGZhbHNlLCAgICAgICAgICAgICAgIC8vQm9vbGVhbjogQ3JlYXRlIHBhdXNlL3BsYXkgZHluYW1pYyBlbGVtZW50XHJcbiAgICBwYXVzZVRleHQ6IFwiUGF1c2VcIiwgICAgICAgICAgICAgLy9TdHJpbmc6IFNldCB0aGUgdGV4dCBmb3IgdGhlIFwicGF1c2VcIiBwYXVzZVBsYXkgaXRlbVxyXG4gICAgcGxheVRleHQ6IFwiUGxheVwiLCAgICAgICAgICAgICAgIC8vU3RyaW5nOiBTZXQgdGhlIHRleHQgZm9yIHRoZSBcInBsYXlcIiBwYXVzZVBsYXkgaXRlbVxyXG5cclxuICAgIC8vIFNwZWNpYWwgcHJvcGVydGllc1xyXG4gICAgY29udHJvbHNDb250YWluZXI6IFwiXCIsICAgICAgICAgIC8ve1VQREFURUR9IGpRdWVyeSBPYmplY3QvU2VsZWN0b3I6IERlY2xhcmUgd2hpY2ggY29udGFpbmVyIHRoZSBuYXZpZ2F0aW9uIGVsZW1lbnRzIHNob3VsZCBiZSBhcHBlbmRlZCB0b28uIERlZmF1bHQgY29udGFpbmVyIGlzIHRoZSBGbGV4U2xpZGVyIGVsZW1lbnQuIEV4YW1wbGUgdXNlIHdvdWxkIGJlICQoXCIuZmxleHNsaWRlci1jb250YWluZXJcIikuIFByb3BlcnR5IGlzIGlnbm9yZWQgaWYgZ2l2ZW4gZWxlbWVudCBpcyBub3QgZm91bmQuXHJcbiAgICBtYW51YWxDb250cm9sczogXCJcIiwgICAgICAgICAgICAgLy97VVBEQVRFRH0galF1ZXJ5IE9iamVjdC9TZWxlY3RvcjogRGVjbGFyZSBjdXN0b20gY29udHJvbCBuYXZpZ2F0aW9uLiBFeGFtcGxlcyB3b3VsZCBiZSAkKFwiLmZsZXgtY29udHJvbC1uYXYgbGlcIikgb3IgXCIjdGFicy1uYXYgbGkgaW1nXCIsIGV0Yy4gVGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB5b3VyIGNvbnRyb2xOYXYgc2hvdWxkIG1hdGNoIHRoZSBudW1iZXIgb2Ygc2xpZGVzL3RhYnMuXHJcbiAgICBzeW5jOiBcIlwiLCAgICAgICAgICAgICAgICAgICAgICAgLy97TkVXfSBTZWxlY3RvcjogTWlycm9yIHRoZSBhY3Rpb25zIHBlcmZvcm1lZCBvbiB0aGlzIHNsaWRlciB3aXRoIGFub3RoZXIgc2xpZGVyLiBVc2Ugd2l0aCBjYXJlLlxyXG4gICAgYXNOYXZGb3I6IFwiXCIsICAgICAgICAgICAgICAgICAgIC8ve05FV30gU2VsZWN0b3I6IEludGVybmFsIHByb3BlcnR5IGV4cG9zZWQgZm9yIHR1cm5pbmcgdGhlIHNsaWRlciBpbnRvIGEgdGh1bWJuYWlsIG5hdmlnYXRpb24gZm9yIGFub3RoZXIgc2xpZGVyXHJcblxyXG4gICAgLy8gQ2Fyb3VzZWwgT3B0aW9uc1xyXG4gICAgaXRlbVdpZHRoOiAwLCAgICAgICAgICAgICAgICAgICAvL3tORVd9IEludGVnZXI6IEJveC1tb2RlbCB3aWR0aCBvZiBpbmRpdmlkdWFsIGNhcm91c2VsIGl0ZW1zLCBpbmNsdWRpbmcgaG9yaXpvbnRhbCBib3JkZXJzIGFuZCBwYWRkaW5nLlxyXG4gICAgaXRlbU1hcmdpbjogMCwgICAgICAgICAgICAgICAgICAvL3tORVd9IEludGVnZXI6IE1hcmdpbiBiZXR3ZWVuIGNhcm91c2VsIGl0ZW1zLlxyXG4gICAgbWluSXRlbXM6IDEsICAgICAgICAgICAgICAgICAgICAvL3tORVd9IEludGVnZXI6IE1pbmltdW0gbnVtYmVyIG9mIGNhcm91c2VsIGl0ZW1zIHRoYXQgc2hvdWxkIGJlIHZpc2libGUuIEl0ZW1zIHdpbGwgcmVzaXplIGZsdWlkbHkgd2hlbiBiZWxvdyB0aGlzLlxyXG4gICAgbWF4SXRlbXM6IDAsICAgICAgICAgICAgICAgICAgICAvL3tORVd9IEludGVnZXI6IE1heG1pbXVtIG51bWJlciBvZiBjYXJvdXNlbCBpdGVtcyB0aGF0IHNob3VsZCBiZSB2aXNpYmxlLiBJdGVtcyB3aWxsIHJlc2l6ZSBmbHVpZGx5IHdoZW4gYWJvdmUgdGhpcyBsaW1pdC5cclxuICAgIG1vdmU6IDAsICAgICAgICAgICAgICAgICAgICAgICAgLy97TkVXfSBJbnRlZ2VyOiBOdW1iZXIgb2YgY2Fyb3VzZWwgaXRlbXMgdGhhdCBzaG91bGQgbW92ZSBvbiBhbmltYXRpb24uIElmIDAsIHNsaWRlciB3aWxsIG1vdmUgYWxsIHZpc2libGUgaXRlbXMuXHJcbiAgICBhbGxvd09uZVNsaWRlOiB0cnVlLCAgICAgICAgICAgLy97TkVXfSBCb29sZWFuOiBXaGV0aGVyIG9yIG5vdCB0byBhbGxvdyBhIHNsaWRlciBjb21wcmlzZWQgb2YgYSBzaW5nbGUgc2xpZGVcclxuXHJcbiAgICAvLyBDYWxsYmFjayBBUElcclxuICAgIHN0YXJ0OiBmdW5jdGlvbigpe30sICAgICAgICAgICAgLy9DYWxsYmFjazogZnVuY3Rpb24oc2xpZGVyKSAtIEZpcmVzIHdoZW4gdGhlIHNsaWRlciBsb2FkcyB0aGUgZmlyc3Qgc2xpZGVcclxuICAgIGJlZm9yZTogZnVuY3Rpb24oKXt9LCAgICAgICAgICAgLy9DYWxsYmFjazogZnVuY3Rpb24oc2xpZGVyKSAtIEZpcmVzIGFzeW5jaHJvbm91c2x5IHdpdGggZWFjaCBzbGlkZXIgYW5pbWF0aW9uXHJcbiAgICBhZnRlcjogZnVuY3Rpb24oKXt9LCAgICAgICAgICAgIC8vQ2FsbGJhY2s6IGZ1bmN0aW9uKHNsaWRlcikgLSBGaXJlcyBhZnRlciBlYWNoIHNsaWRlciBhbmltYXRpb24gY29tcGxldGVzXHJcbiAgICBlbmQ6IGZ1bmN0aW9uKCl7fSwgICAgICAgICAgICAgIC8vQ2FsbGJhY2s6IGZ1bmN0aW9uKHNsaWRlcikgLSBGaXJlcyB3aGVuIHRoZSBzbGlkZXIgcmVhY2hlcyB0aGUgbGFzdCBzbGlkZSAoYXN5bmNocm9ub3VzKVxyXG4gICAgYWRkZWQ6IGZ1bmN0aW9uKCl7fSwgICAgICAgICAgICAvL3tORVd9IENhbGxiYWNrOiBmdW5jdGlvbihzbGlkZXIpIC0gRmlyZXMgYWZ0ZXIgYSBzbGlkZSBpcyBhZGRlZFxyXG4gICAgcmVtb3ZlZDogZnVuY3Rpb24oKXt9LCAgICAgICAgICAgLy97TkVXfSBDYWxsYmFjazogZnVuY3Rpb24oc2xpZGVyKSAtIEZpcmVzIGFmdGVyIGEgc2xpZGUgaXMgcmVtb3ZlZFxyXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7fSAgICAgICAgICAgICAvL3tORVd9IENhbGxiYWNrOiBmdW5jdGlvbihzbGlkZXIpIC0gRmlyZXMgYWZ0ZXIgdGhlIHNsaWRlciBpcyBpbml0aWFsbHkgc2V0dXBcclxuICB9O1xyXG5cclxuICAvL0ZsZXhTbGlkZXI6IFBsdWdpbiBGdW5jdGlvblxyXG4gICQuZm4uZmxleHNsaWRlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHsgb3B0aW9ucyA9IHt9OyB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgc2VsZWN0b3IgPSAob3B0aW9ucy5zZWxlY3RvcikgPyBvcHRpb25zLnNlbGVjdG9yIDogXCIuc2xpZGVzID4gbGlcIixcclxuICAgICAgICAgICAgJHNsaWRlcyA9ICR0aGlzLmZpbmQoc2VsZWN0b3IpO1xyXG5cclxuICAgICAgaWYgKCAoICRzbGlkZXMubGVuZ3RoID09PSAxICYmIG9wdGlvbnMuYWxsb3dPbmVTbGlkZSA9PT0gdHJ1ZSApIHx8ICRzbGlkZXMubGVuZ3RoID09PSAwICkge1xyXG4gICAgICAgICAgJHNsaWRlcy5mYWRlSW4oNDAwKTtcclxuICAgICAgICAgIGlmIChvcHRpb25zLnN0YXJ0KSB7IG9wdGlvbnMuc3RhcnQoJHRoaXMpOyB9XHJcbiAgICAgICAgfSBlbHNlIGlmICgkdGhpcy5kYXRhKCdmbGV4c2xpZGVyJykgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgbmV3ICQuZmxleHNsaWRlcih0aGlzLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSGVscGVyIHN0cmluZ3MgdG8gcXVpY2tseSBwZXJmb3JtIGZ1bmN0aW9ucyBvbiB0aGUgc2xpZGVyXHJcbiAgICAgIHZhciAkc2xpZGVyID0gJCh0aGlzKS5kYXRhKCdmbGV4c2xpZGVyJyk7XHJcbiAgICAgIHN3aXRjaCAob3B0aW9ucykge1xyXG4gICAgICAgIGNhc2UgXCJwbGF5XCI6ICRzbGlkZXIucGxheSgpOyBicmVhaztcclxuICAgICAgICBjYXNlIFwicGF1c2VcIjogJHNsaWRlci5wYXVzZSgpOyBicmVhaztcclxuICAgICAgICBjYXNlIFwic3RvcFwiOiAkc2xpZGVyLnN0b3AoKTsgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIm5leHRcIjogJHNsaWRlci5mbGV4QW5pbWF0ZSgkc2xpZGVyLmdldFRhcmdldChcIm5leHRcIiksIHRydWUpOyBicmVhaztcclxuICAgICAgICBjYXNlIFwicHJldlwiOlxyXG4gICAgICAgIGNhc2UgXCJwcmV2aW91c1wiOiAkc2xpZGVyLmZsZXhBbmltYXRlKCRzbGlkZXIuZ2V0VGFyZ2V0KFwicHJldlwiKSwgdHJ1ZSk7IGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6IGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJudW1iZXJcIikgeyAkc2xpZGVyLmZsZXhBbmltYXRlKG9wdGlvbnMsIHRydWUpOyB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59KShqUXVlcnkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==